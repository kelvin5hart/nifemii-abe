{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kelvinatemie-hart/Documents/Website/nifemii-abe/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useState, useEffect } from \"react\";\n\nexport default function Navbar() {\n  const [isScrolled, setIsScrolled] = useState(false);\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const pathname = usePathname();\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setIsScrolled(window.scrollY > 50);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  const isActive = (href: string) => {\n    if (href === \"/\") {\n      return pathname === \"/\";\n    }\n    return pathname.startsWith(href);\n  };\n\n  const navLinks = [\n    { href: \"/\", label: \"Home\" },\n    { href: \"/shop\", label: \"Shop\" },\n    { href: \"/services\", label: \"Services\" },\n    { href: \"/about\", label: \"About\" },\n    { href: \"/contact\", label: \"Contact\" },\n  ];\n\n  return (\n    <nav\n      className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${\n        isScrolled\n          ? \"bg-[#0a0a0a]/95 backdrop-blur-sm py-4\"\n          : \"bg-transparent py-6\"\n      }`}\n    >\n      <div className=\"max-w-7xl mx-auto px-6 flex items-center justify-between\">\n        {/* Logo */}\n        <Link href=\"/\" className=\"group\">\n          <h1 className=\"text-2xl md:text-3xl font-light tracking-[0.2em] text-[#f5f5f5] font-[family-name:var(--font-cormorant)]\">\n            NIFEMII{\" \"}\n            <span className=\"text-[#c9a962] group-hover:text-[#e5d4a1] transition-colors\">\n              ABE\n            </span>\n          </h1>\n        </Link>\n\n        {/* Desktop Navigation */}\n        <div className=\"hidden md:flex items-center space-x-8\">\n          {navLinks.map((link) => (\n            <Link\n              key={link.href}\n              href={link.href}\n              className={`text-sm tracking-[0.15em] transition-colors duration-300 font-[family-name:var(--font-montserrat)] uppercase ${\n                isActive(link.href)\n                  ? \"text-[#c9a962] border-b border-[#c9a962] pb-1\"\n                  : \"text-[#888888] hover:text-[#c9a962]\"\n              }`}\n            >\n              {link.label}\n            </Link>\n          ))}\n        </div>\n\n        {/* Mobile Menu Button */}\n        <button\n          className=\"md:hidden flex flex-col space-y-1.5 p-2\"\n          onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n          aria-label=\"Toggle menu\"\n        >\n          <span\n            className={`w-6 h-0.5 bg-[#f5f5f5] transition-all duration-300 ${\n              isMobileMenuOpen ? \"rotate-45 translate-y-2\" : \"\"\n            }`}\n          />\n          <span\n            className={`w-6 h-0.5 bg-[#f5f5f5] transition-all duration-300 ${\n              isMobileMenuOpen ? \"opacity-0\" : \"\"\n            }`}\n          />\n          <span\n            className={`w-6 h-0.5 bg-[#f5f5f5] transition-all duration-300 ${\n              isMobileMenuOpen ? \"-rotate-45 -translate-y-2\" : \"\"\n            }`}\n          />\n        </button>\n      </div>\n\n      {/* Mobile Menu */}\n      <div\n        className={`md:hidden absolute top-full left-0 right-0 bg-[#0a0a0a]/98 backdrop-blur-sm transition-all duration-300 ${\n          isMobileMenuOpen\n            ? \"opacity-100 visible\"\n            : \"opacity-0 invisible\"\n        }`}\n      >\n        <div className=\"px-6 py-8 flex flex-col space-y-6\">\n          {navLinks.map((link) => (\n            <Link\n              key={link.href}\n              href={link.href}\n              className={`text-lg tracking-[0.15em] transition-colors duration-300 font-[family-name:var(--font-montserrat)] uppercase ${\n                isActive(link.href)\n                  ? \"text-[#c9a962]\"\n                  : \"text-[#888888] hover:text-[#c9a962]\"\n              }`}\n              onClick={() => setIsMobileMenuOpen(false)}\n            >\n              {link.label}\n            </Link>\n          ))}\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,WAAW,IAAA,oJAAW;IAE5B,IAAA,0KAAS;4BAAC;YACR,MAAM;iDAAe;oBACnB,cAAc,OAAO,OAAO,GAAG;gBACjC;;YACA,OAAO,gBAAgB,CAAC,UAAU;YAClC;oCAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;2BAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,IAAI,SAAS,KAAK;YAChB,OAAO,aAAa;QACtB;QACA,OAAO,SAAS,UAAU,CAAC;IAC7B;IAEA,MAAM,WAAW;QACf;YAAE,MAAM;YAAK,OAAO;QAAO;QAC3B;YAAE,MAAM;YAAS,OAAO;QAAO;QAC/B;YAAE,MAAM;YAAa,OAAO;QAAW;QACvC;YAAE,MAAM;YAAU,OAAO;QAAQ;QACjC;YAAE,MAAM;YAAY,OAAO;QAAU;KACtC;IAED,qBACE,6LAAC;QACC,WAAW,CAAC,4DAA4D,EACtE,aACI,0CACA,uBACJ;;0BAEF,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC,0KAAI;wBAAC,MAAK;wBAAI,WAAU;kCACvB,cAAA,6LAAC;4BAAG,WAAU;;gCAA2G;gCAC/G;8CACR,6LAAC;oCAAK,WAAU;8CAA8D;;;;;;;;;;;;;;;;;kCAOlF,6LAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,qBACb,6LAAC,0KAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,CAAC,6GAA6G,EACvH,SAAS,KAAK,IAAI,IACd,kDACA,uCACJ;0CAED,KAAK,KAAK;+BARN,KAAK,IAAI;;;;;;;;;;kCAcpB,6LAAC;wBACC,WAAU;wBACV,SAAS,IAAM,oBAAoB,CAAC;wBACpC,cAAW;;0CAEX,6LAAC;gCACC,WAAW,CAAC,mDAAmD,EAC7D,mBAAmB,4BAA4B,IAC/C;;;;;;0CAEJ,6LAAC;gCACC,WAAW,CAAC,mDAAmD,EAC7D,mBAAmB,cAAc,IACjC;;;;;;0CAEJ,6LAAC;gCACC,WAAW,CAAC,mDAAmD,EAC7D,mBAAmB,8BAA8B,IACjD;;;;;;;;;;;;;;;;;;0BAMR,6LAAC;gBACC,WAAW,CAAC,wGAAwG,EAClH,mBACI,wBACA,uBACJ;0BAEF,cAAA,6LAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC,qBACb,6LAAC,0KAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,6GAA6G,EACvH,SAAS,KAAK,IAAI,IACd,mBACA,uCACJ;4BACF,SAAS,IAAM,oBAAoB;sCAElC,KAAK,KAAK;2BATN,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;AAgB5B;GAnHwB;;QAGL,oJAAW;;;KAHN"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///Users/kelvinatemie-hart/Documents/Website/nifemii-abe/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, connectAuthEmulator } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAmJ53W4OJp6xbJ-QHVAaBbJg4EQLdbIh4\",\n  authDomain: \"nifemii-abe-689cd.firebaseapp.com\",\n  projectId: \"nifemii-abe-689cd\",\n  storageBucket: \"nifemii-abe-689cd.firebasestorage.app\",\n  messagingSenderId: \"430817811311\",\n  appId: \"1:430817811311:web:33e9e78812dbc457f9a69a\",\n  measurementId: \"G-SFVS5YF9HY\",\n};\n\n// Initialize Firebase only if not already initialized\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\n\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Set language for phone auth\nif (typeof window !== \"undefined\") {\n  auth.languageCode = \"en\";\n}\n\nexport default app;\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sDAAsD;AACtD,MAAM,MAAM,IAAA,8KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,oLAAa,EAAC,kBAAkB,IAAA,8KAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AAE/B,8BAA8B;AAC9B,wCAAmC;IACjC,KAAK,YAAY,GAAG;AACtB;uCAEe"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///Users/kelvinatemie-hart/Documents/Website/nifemii-abe/src/lib/otp-service.ts"],"sourcesContent":["import {\n  doc,\n  setDoc,\n  getDoc,\n  deleteDoc,\n  serverTimestamp,\n  Timestamp,\n} from \"firebase/firestore\";\nimport { db } from \"./firebase\";\n\n// OTP expires after 5 minutes\nconst OTP_EXPIRY_MINUTES = 5;\n\n// Termii API configuration\nconst TERMII_API_KEY = \"TLezWGrsbuJBBCLYZiUogzZjzofxaIKYqRwsjvenTDZQxuBMfbGexCQoFvQWhM\";\n\ninterface OTPDocument {\n  phone: string;\n  code: string;\n  createdAt: Timestamp;\n  expiresAt: Timestamp;\n  attempts: number;\n}\n\n// Generate a 6-digit OTP\nexport function generateOTP(): string {\n  return Math.floor(100000 + Math.random() * 900000).toString();\n}\n\n// Format phone number to standard format\nexport function formatPhoneNumber(phone: string): string {\n  // Remove all non-digits\n  let digits = phone.replace(/\\D/g, \"\");\n\n  // Handle Nigerian numbers\n  if (digits.startsWith(\"0\")) {\n    digits = \"234\" + digits.slice(1);\n  } else if (!digits.startsWith(\"234\")) {\n    digits = \"234\" + digits;\n  }\n\n  return \"+\" + digits;\n}\n\n// Format phone for Termii (without + sign)\nfunction formatPhoneForTermii(phone: string): string {\n  return phone.replace(/\\+/g, \"\");\n}\n\n// Create OTP document ID from phone number (safe for Firestore)\nfunction getOTPDocId(phone: string): string {\n  return phone.replace(/\\+/g, \"\");\n}\n\n// Send SMS via Termii (disabled until Sender ID is approved)\n// To enable: Request a Sender ID on Termii dashboard, then update TERMII_SENDER_ID\nconst TERMII_SENDER_ID = \"\"; // Set your approved sender ID here\n\nasync function sendSMSViaTermii(phone: string, code: string): Promise<boolean> {\n  // Skip SMS if no sender ID configured\n  if (!TERMII_SENDER_ID) {\n    console.log(\"========================================\");\n    console.log(`ðŸ“± OTP CODE for ${phone}: ${code}`);\n    console.log(\"========================================\");\n    console.log(\"(SMS disabled - configure TERMII_SENDER_ID to enable)\");\n    return true; // Return true so the flow continues\n  }\n\n  try {\n    const response = await fetch(\"https://api.ng.termii.com/api/sms/send\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        api_key: TERMII_API_KEY,\n        to: formatPhoneForTermii(phone),\n        from: TERMII_SENDER_ID,\n        sms: `Your Nifemii Abe verification code is: ${code}. Valid for ${OTP_EXPIRY_MINUTES} minutes.`,\n        type: \"plain\",\n        channel: \"generic\",\n      }),\n    });\n\n    const data = await response.json();\n    console.log(\"Termii response:\", JSON.stringify(data, null, 2));\n\n    if (data.message_id || response.status === 200) {\n      return true;\n    } else {\n      console.error(\"Termii error:\", JSON.stringify(data, null, 2));\n      // Still log OTP to console as fallback\n      console.log(`ðŸ“± OTP CODE (SMS failed): ${code}`);\n      return true;\n    }\n  } catch (error) {\n    console.error(\"Error sending SMS via Termii:\", error);\n    console.log(`ðŸ“± OTP CODE (SMS error): ${code}`);\n    return true;\n  }\n}\n\n// Send OTP\nexport async function sendOTP(phone: string): Promise<{ success: boolean; message: string }> {\n  try {\n    const formattedPhone = formatPhoneNumber(phone);\n    const docId = getOTPDocId(formattedPhone);\n    const code = generateOTP();\n\n    const now = new Date();\n    const expiresAt = new Date(now.getTime() + OTP_EXPIRY_MINUTES * 60 * 1000);\n\n    // Store OTP in Firestore\n    await setDoc(doc(db, \"otps\", docId), {\n      phone: formattedPhone,\n      code: code,\n      createdAt: serverTimestamp(),\n      expiresAt: Timestamp.fromDate(expiresAt),\n      attempts: 0,\n    });\n\n    // Send SMS via Termii\n    const smsSent = await sendSMSViaTermii(formattedPhone, code);\n\n    if (!smsSent) {\n      // Log for debugging but don't fail - in case Termii has issues\n      console.warn(\"SMS sending may have failed, but OTP is stored\");\n    }\n\n    return {\n      success: true,\n      message: `Verification code sent to ${formattedPhone}`,\n    };\n  } catch (error) {\n    console.error(\"Error sending OTP:\", error);\n    return {\n      success: false,\n      message: \"Failed to send OTP. Please try again.\",\n    };\n  }\n}\n\n// Verify OTP\nexport async function verifyOTP(\n  phone: string,\n  code: string\n): Promise<{ success: boolean; message: string }> {\n  try {\n    const formattedPhone = formatPhoneNumber(phone);\n    const docId = getOTPDocId(formattedPhone);\n\n    const otpDoc = await getDoc(doc(db, \"otps\", docId));\n\n    if (!otpDoc.exists()) {\n      return {\n        success: false,\n        message: \"No OTP found. Please request a new code.\",\n      };\n    }\n\n    const otpData = otpDoc.data() as OTPDocument;\n\n    // Check if expired\n    const now = new Date();\n    const expiresAt = otpData.expiresAt.toDate();\n    if (now > expiresAt) {\n      await deleteDoc(doc(db, \"otps\", docId));\n      return {\n        success: false,\n        message: \"OTP has expired. Please request a new code.\",\n      };\n    }\n\n    // Check attempts (max 3)\n    if (otpData.attempts >= 3) {\n      await deleteDoc(doc(db, \"otps\", docId));\n      return {\n        success: false,\n        message: \"Too many attempts. Please request a new code.\",\n      };\n    }\n\n    // Verify code\n    if (otpData.code !== code) {\n      // Increment attempts\n      await setDoc(\n        doc(db, \"otps\", docId),\n        { attempts: otpData.attempts + 1 },\n        { merge: true }\n      );\n      return {\n        success: false,\n        message: `Invalid code. ${2 - otpData.attempts} attempts remaining.`,\n      };\n    }\n\n    // OTP verified - delete it\n    await deleteDoc(doc(db, \"otps\", docId));\n\n    return {\n      success: true,\n      message: \"OTP verified successfully.\",\n    };\n  } catch (error) {\n    console.error(\"Error verifying OTP:\", error);\n    return {\n      success: false,\n      message: \"Failed to verify OTP. Please try again.\",\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///Users/kelvinatemie-hart/Documents/Website/nifemii-abe/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  createContext,\n  useContext,\n  useEffect,\n  useState,\n  ReactNode,\n} from \"react\";\nimport {\n  User as FirebaseUser,\n  onAuthStateChanged,\n  signOut as firebaseSignOut,\n  signInWithEmailAndPassword,\n  signInAnonymously,\n} from \"firebase/auth\";\nimport {\n  doc,\n  getDoc,\n  setDoc,\n  serverTimestamp,\n  query,\n  collection,\n  where,\n  getDocs,\n} from \"firebase/firestore\";\nimport { auth, db } from \"@/lib/firebase\";\nimport { User } from \"@/lib/firebase-types\";\nimport {\n  sendOTP as sendOTPService,\n  verifyOTP as verifyOTPService,\n  formatPhoneNumber,\n} from \"@/lib/otp-service\";\n\ninterface AuthContextType {\n  firebaseUser: FirebaseUser | null;\n  user: User | null;\n  loading: boolean;\n  isAdmin: boolean;\n\n  // Phone auth (custom OTP)\n  sendOTP: (phoneNumber: string) => Promise<{ success: boolean; message: string }>;\n  verifyOTPAndSignIn: (phoneNumber: string, otp: string) => Promise<{ success: boolean; message: string }>;\n\n  // Admin auth\n  adminLogin: (email: string, password: string) => Promise<void>;\n\n  // Sign out\n  signOut: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [firebaseUser, setFirebaseUser] = useState<FirebaseUser | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Listen to auth state changes\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setFirebaseUser(firebaseUser);\n\n      if (firebaseUser) {\n        // Fetch user data from Firestore\n        const userDoc = await getDoc(doc(db, \"users\", firebaseUser.uid));\n        if (userDoc.exists()) {\n          setUser({ id: userDoc.id, ...userDoc.data() } as User);\n        } else {\n          // User exists in Firebase Auth but not in Firestore\n          // This can happen with anonymous users before phone verification\n          setUser(null);\n        }\n      } else {\n        setUser(null);\n      }\n\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  // Send OTP using custom service\n  const sendOTP = async (phoneNumber: string) => {\n    return await sendOTPService(phoneNumber);\n  };\n\n  // Verify OTP and sign in\n  const verifyOTPAndSignIn = async (phoneNumber: string, otp: string) => {\n    // First verify the OTP\n    const verifyResult = await verifyOTPService(phoneNumber, otp);\n\n    if (!verifyResult.success) {\n      return verifyResult;\n    }\n\n    const formattedPhone = formatPhoneNumber(phoneNumber);\n\n    try {\n      // Check if a user with this phone number already exists\n      const usersQuery = query(\n        collection(db, \"users\"),\n        where(\"phone\", \"==\", formattedPhone)\n      );\n      const existingUsers = await getDocs(usersQuery);\n\n      let userId: string;\n\n      if (!existingUsers.empty) {\n        // User exists - use their ID\n        userId = existingUsers.docs[0].id;\n\n        // Sign in anonymously to get a session (we'll link to the user data)\n        const anonResult = await signInAnonymously(auth);\n\n        // If the anonymous user ID doesn't match, we need to handle this\n        // For simplicity, we'll just use the existing user data\n        if (anonResult.user.uid !== userId) {\n          // Update the user doc to link with this auth session\n          // Or create a session mapping\n        }\n\n        setUser({ id: userId, ...existingUsers.docs[0].data() } as User);\n      } else {\n        // New user - create account\n        const anonResult = await signInAnonymously(auth);\n        userId = anonResult.user.uid;\n\n        // Create user document\n        await setDoc(doc(db, \"users\", userId), {\n          phone: formattedPhone,\n          createdAt: serverTimestamp(),\n          createdBy: \"self\",\n        });\n\n        setUser({\n          id: userId,\n          phone: formattedPhone,\n          createdAt: new Date(),\n          createdBy: \"self\",\n        });\n      }\n\n      return {\n        success: true,\n        message: \"Logged in successfully!\",\n      };\n    } catch (error) {\n      console.error(\"Sign in error:\", error);\n      return {\n        success: false,\n        message: \"Failed to sign in. Please try again.\",\n      };\n    }\n  };\n\n  // Admin login with email/password\n  const adminLogin = async (email: string, password: string) => {\n    const result = await signInWithEmailAndPassword(auth, email, password);\n\n    // Check if user is admin\n    const userDoc = await getDoc(doc(db, \"users\", result.user.uid));\n    if (!userDoc.exists() || !userDoc.data()?.isAdmin) {\n      await firebaseSignOut(auth);\n      throw new Error(\"Unauthorized: Not an admin\");\n    }\n\n    setUser({ id: userDoc.id, ...userDoc.data() } as User);\n  };\n\n  // Sign out\n  const signOut = async () => {\n    await firebaseSignOut(auth);\n    setUser(null);\n    setFirebaseUser(null);\n  };\n\n  const value: AuthContextType = {\n    firebaseUser,\n    user,\n    loading,\n    isAdmin: user?.isAdmin || false,\n    sendOTP,\n    verifyOTPAndSignIn,\n    adminLogin,\n    signOut,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///Users/kelvinatemie-hart/Documents/Website/nifemii-abe/src/components/Providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { ReactNode } from \"react\";\nimport { AuthProvider } from \"@/contexts/AuthContext\";\n\nexport default function Providers({ children }: { children: ReactNode }) {\n  return <AuthProvider>{children}</AuthProvider>;\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKe,SAAS,UAAU,EAAE,QAAQ,EAA2B;IACrE,qBAAO,6LAAC,kJAAY;kBAAE;;;;;;AACxB;KAFwB"}}]
}