(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50875,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(36180);var s=e.i(98925),n=e.i(59141),r=e.i(22016);let l=e=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(e),o=e=>(e instanceof s.Timestamp?e.toDate():e).toLocaleDateString("en-NG",{month:"short",day:"numeric",year:"numeric"});function i(){let e,i,d,c,[m,x]=(0,a.useState)([]),[f,p]=(0,a.useState)(!0),[h,u]=(0,a.useState)("all"),[y,v]=(0,a.useState)("all"),[j,N]=(0,a.useState)("month");(0,a.useEffect)(()=>{let e=(0,s.query)((0,s.collection)(n.db,"orders"),(0,s.orderBy)("createdAt","desc")),t=(0,s.onSnapshot)(e,e=>{x(e.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate?.()||new Date,updatedAt:t.updatedAt?.toDate?.()||new Date}})),p(!1)});return()=>t()},[]);let g=()=>{let e,t,a=[];(t=new Date((e=new Date).getFullYear(),e.getMonth(),e.getDate()),m.filter(e=>{if("cancelled"===e.status)return!1;let a=e.createdAt instanceof Date?e.createdAt:new Date;switch(j){case"today":return a>=t;case"week":let s=new Date(t);return s.setDate(s.getDate()-7),a>=s;case"month":let n=new Date(t);return n.setMonth(n.getMonth()-1),a>=n;default:return!0}})).forEach(e=>{let t=e.pricing;if(!t)return;let n={orderId:e.id,orderRef:`#${e.id.slice(0,8)}`,customerName:e.userName||"Unknown",customerPhone:e.userPhone,orderDate:e.createdAt instanceof Date?e.createdAt:new Date};if(void 0!==t.depositAmount&&t.depositAmount>0){a.push({...n,type:"deposit",amount:t.depositAmount,method:t.depositMethod||"pending",status:t.depositPaid?"paid":"pending",date:t.depositDate instanceof s.Timestamp?t.depositDate.toDate():t.depositPaid?e.createdAt instanceof Date?e.createdAt:new Date:void 0});let r=t.balanceAmount||0;r>0&&a.push({...n,type:"balance",amount:r,method:t.balanceMethod||"pending",status:t.balancePaid?"paid":"pending",date:t.balanceDate instanceof s.Timestamp?t.balanceDate.toDate():t.balancePaid?e.updatedAt instanceof Date?e.updatedAt:new Date:void 0})}else a.push({...n,type:"full",amount:t.totalAmount,method:t.depositMethod||e.paymentMethod||"pending",status:t.depositPaid?"paid":"pending",date:t.depositDate instanceof s.Timestamp?t.depositDate.toDate():t.depositPaid?e.createdAt instanceof Date?e.createdAt:new Date:void 0})});let n=a;return"all"!==h&&(n=n.filter(e=>e.method===h)),"all"!==y&&(n=n.filter(e=>e.status===y)),n.sort((e,t)=>{let a=e.date||e.orderDate;return(t.date||t.orderDate).getTime()-a.getTime()})},b=(i=(e=g()).filter(e=>"paid"===e.status).reduce((e,t)=>e+t.amount,0),d=e.filter(e=>"pending"===e.status).reduce((e,t)=>e+t.amount,0),c={},e.filter(e=>"paid"===e.status).forEach(e=>{c[e.method]=(c[e.method]||0)+e.amount}),{paidTotal:i,pendingTotal:d,byMethod:c}),w=g();return f?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"text-[#888888]",children:"Loading financial data..."})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Finance"}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Track payments received and outstanding"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"text-green-400",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("span",{className:"text-green-400 text-xs font-[family-name:var(--font-montserrat)]",children:"Received"})]}),(0,t.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-green-400 mb-1",children:l(b.paidTotal)}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Total Paid"})]}),(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"text-yellow-400",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("span",{className:"text-yellow-400 text-xs font-[family-name:var(--font-montserrat)]",children:"Outstanding"})]}),(0,t.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-yellow-400 mb-1",children:l(b.pendingTotal)}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Pending Payments"})]}),(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"text-[#c9a962]",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("span",{className:"text-[#c9a962] text-xs font-[family-name:var(--font-montserrat)]",children:"Combined"})]}),(0,t.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-1",children:l(b.paidTotal+b.pendingTotal)}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Total Value"})]})]}),Object.keys(b.byMethod).length>0&&(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-4",children:"Revenue by Payment Method"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(b.byMethod).map(([e,a])=>(0,t.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,t.jsx)("p",{className:"text-[#888888] text-xs uppercase tracking-wider font-[family-name:var(--font-montserrat)] mb-2",children:"paystack"===e?"Paystack (Online)":e.charAt(0).toUpperCase()+e.slice(1)}),(0,t.jsx)("p",{className:"text-[#c9a962] text-lg font-[family-name:var(--font-montserrat)]",children:l(a)})]},e))})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,t.jsx)("option",{value:"today",children:"Today"}),(0,t.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,t.jsx)("option",{value:"month",children:"Last 30 Days"}),(0,t.jsx)("option",{value:"all",children:"All Time"})]}),(0,t.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"paid",children:"Paid Only"}),(0,t.jsx)("option",{value:"pending",children:"Pending Only"})]}),(0,t.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"All Methods"}),(0,t.jsx)("option",{value:"paystack",children:"Paystack"}),(0,t.jsx)("option",{value:"cash",children:"Cash"}),(0,t.jsx)("option",{value:"transfer",children:"Transfer"})]})]}),(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-[#1a1a1a]",children:(0,t.jsxs)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:["Payment Records (",w.length,")"]})}),0===w.length?(0,t.jsx)("div",{className:"p-12 text-center",children:(0,t.jsx)("p",{className:"text-[#888888] font-[family-name:var(--font-montserrat)]",children:"No payment records found for the selected filters"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"md:hidden divide-y divide-[#1a1a1a]",children:w.map((e,a)=>(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.default,{href:"/admin/orders",className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline",children:e.orderRef}),(0,t.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] mt-1",children:e.customerName})]}),(0,t.jsx)("span",{className:`px-2 py-1 text-xs border font-[family-name:var(--font-montserrat)] ${"paid"===e.status?"bg-green-500/20 text-green-400 border-green-500/50":"bg-yellow-500/20 text-yellow-400 border-yellow-500/50"}`,children:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-[#c9a962] font-[family-name:var(--font-montserrat)]",children:l(e.amount)}),(0,t.jsxs)("span",{className:"text-[#888888] font-[family-name:var(--font-montserrat)] capitalize",children:[e.type," Â· ",e.method||"-"]})]}),e.date&&(0,t.jsx)("p",{className:"text-xs text-[#666666] mt-2 font-[family-name:var(--font-montserrat)]",children:o(e.date)})]},`${e.orderId}-${e.type}-${a}`))}),(0,t.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-[#0a0a0a] border-b border-[#1a1a1a]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Order"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Customer"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Type"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Amount"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Method"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Status"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-[#1a1a1a]",children:w.map((e,a)=>(0,t.jsxs)("tr",{className:"hover:bg-[#1a1a1a]/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)(r.default,{href:"/admin/orders",className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline",children:e.orderRef})}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:e.customerName}),(0,t.jsx)("p",{className:"text-[#888888] text-xs font-[family-name:var(--font-montserrat)]",children:e.customerPhone})]}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)] capitalize",children:e.type}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:l(e.amount)}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm font-[family-name:var(--font-montserrat)] capitalize",children:"pending"===e.status?(0,t.jsx)("span",{className:"text-[#666666]",children:"-"}):(0,t.jsx)("span",{className:"text-[#888888]",children:"paystack"===e.method?"Paystack":e.method})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs border font-[family-name:var(--font-montserrat)] ${"paid"===e.status?"bg-green-500/20 text-green-400 border-green-500/50":"bg-yellow-500/20 text-yellow-400 border-yellow-500/50"}`,children:e.status})}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:e.date?o(e.date):"-"})]},`${e.orderId}-${e.type}-${a}`))})]})})]})]})]})}e.s(["default",()=>i])}]);