(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84526,e=>{"use strict";var a=e.i(43476),t=e.i(71645);e.i(36180);var s=e.i(98925),r=e.i(59141),n=e.i(17747);function l(){let[e,l]=(0,t.useState)([]),[o,m]=(0,t.useState)({}),[i,c]=(0,t.useState)(!0),[d,f]=(0,t.useState)(null),[x,h]=(0,t.useState)(!1),[u,b]=(0,t.useState)(""),[p,y]=(0,t.useState)(!1),[v,j]=(0,t.useState)({phone:"",name:"",email:""}),[N,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=(0,s.query)((0,s.collection)(r.db,"users"),(0,s.orderBy)("createdAt","desc")),a=(0,s.onSnapshot)(e,e=>{l(e.docs.map(e=>{let a=e.data();return{id:e.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}}).filter(e=>!e.isAdmin)),c(!1)}),t=(0,s.query)((0,s.collection)(r.db,"orders")),n=(0,s.onSnapshot)(t,e=>{let a={};e.docs.forEach(e=>{let t=e.data().userId;a[t]=(a[t]||0)+1}),m(a)});return()=>{a(),n()}},[]);let w=e.filter(e=>{if(!u)return!0;let a=u.toLowerCase();return e.name?.toLowerCase().includes(a)||e.phone.includes(a)||e.email?.toLowerCase().includes(a)}),k=async()=>{if(v.phone&&v.name){g(!0);try{let e=(0,n.formatPhoneNumber)(v.phone),a=(0,s.query)((0,s.collection)(r.db,"users"),(0,s.where)("phone","==",e));if(!(await (0,s.getDocs)(a)).empty){alert("A customer with this phone number already exists"),g(!1);return}await (0,s.addDoc)((0,s.collection)(r.db,"users"),{phone:e,name:v.name,email:v.email||null,createdAt:s.Timestamp.now(),createdBy:"admin"}),j({phone:"",name:"",email:""}),y(!1)}catch(e){console.error("Error creating customer:",e)}finally{g(!1)}}},C=async()=>{if(d){g(!0);try{await (0,s.updateDoc)((0,s.doc)(r.db,"users",d.id),{name:d.name||null,email:d.email||null,measurements:d.measurements||null,updatedAt:s.Timestamp.now()}),h(!1)}catch(e){console.error("Error updating customer:",e)}finally{g(!1)}}},S=(e,a)=>{d&&f({...d,measurements:{...d.measurements,[e]:a}})},A=e=>new Intl.DateTimeFormat("en-NG",{day:"numeric",month:"short",year:"numeric"}).format(e);return i?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-[#888888]",children:"Loading customers..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Customers"}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"bg-[#c9a962] text-[#0a0a0a] px-4 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors",children:"+ Add Customer"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:u,onChange:e=>b(e.target.value),className:"w-full max-w-md bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Search by name, phone, or email..."})}),0===w.length?(0,a.jsx)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-12 text-center",children:(0,a.jsx)("p",{className:"text-[#888888] font-[family-name:var(--font-montserrat)]",children:"No customers found"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:hidden space-y-4",children:w.map(e=>(0,a.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:e.name||"No name"}),(0,a.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:e.phone})]}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 ${e.measurements?"bg-green-500/20 text-green-400":"bg-[#2a2a2a] text-[#888888]"} font-[family-name:var(--font-montserrat)]`,children:e.measurements?"Measurements":"No measurements"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]",children:[(0,a.jsxs)("span",{children:[o[e.id]||0," orders"]}),(0,a.jsxs)("span",{children:["Joined ",A(e.createdAt)]})]}),(0,a.jsx)("button",{onClick:()=>{f(e),h(!1)},className:"w-full bg-[#1a1a1a] text-[#c9a962] py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#222222] transition-colors",children:"View Details"})]},e.id))}),(0,a.jsx)("div",{className:"hidden md:block bg-[#111111] border border-[#1a1a1a] overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-[#0a0a0a] border-b border-[#1a1a1a]",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Customer"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Phone"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Orders"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Measurements"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Joined"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-[#1a1a1a]",children:w.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[#1a1a1a]/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:e.name||"No name"}),e.email&&(0,a.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:e.email})]})}),(0,a.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:e.phone}),(0,a.jsx)("td",{className:"px-4 py-4 text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:o[e.id]||0}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("span",{className:`text-xs px-2 py-1 ${e.measurements?"bg-green-500/20 text-green-400":"bg-[#2a2a2a] text-[#888888]"} font-[family-name:var(--font-montserrat)]`,children:e.measurements?"Saved":"Not set"})}),(0,a.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:A(e.createdAt)}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("button",{onClick:()=>{f(e),h(!1)},className:"text-[#c9a962] hover:text-[#d4b87a] text-sm font-[family-name:var(--font-montserrat)]",children:"View"})})]},e.id))})]})})})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4",children:(0,a.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-md max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none",children:[(0,a.jsxs)("div",{className:"border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Add Customer"}),(0,a.jsx)("button",{onClick:()=>y(!1),className:"text-[#888888] hover:text-[#f5f5f5]",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Phone Number *"}),(0,a.jsx)("input",{type:"tel",value:v.phone,onChange:e=>j({...v,phone:e.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"08012345678"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Full Name *"}),(0,a.jsx)("input",{type:"text",value:v.name,onChange:e=>j({...v,name:e.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Email (optional)"}),(0,a.jsx)("input",{type:"email",value:v.email,onChange:e=>j({...v,email:e.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{onClick:()=>y(!1),className:"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:k,disabled:N||!v.phone||!v.name,className:"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:N?"Creating...":"Create Customer"})]})]})]})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4",children:(0,a.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-2xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-4 md:px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Customer Details"}),(0,a.jsx)("button",{onClick:()=>{f(null),h(!1)},className:"text-[#888888] hover:text-[#f5f5f5]",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h3",{className:"text-sm uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Contact Information"}),!x&&(0,a.jsx)("button",{onClick:()=>h(!0),className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)]",children:"Edit"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Phone"}),(0,a.jsx)("p",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:d.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Name"}),x?(0,a.jsx)("input",{type:"text",value:d.name||"",onChange:e=>f({...d,name:e.target.value}),className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}):(0,a.jsx)("p",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:d.name||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Email"}),x?(0,a.jsx)("input",{type:"email",value:d.email||"",onChange:e=>f({...d,email:e.target.value}),className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}):(0,a.jsx)("p",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:d.email||"Not set"})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,a.jsx)("h3",{className:"text-sm uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Measurements (inches)"})}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{key:"chest",label:"Chest"},{key:"waist",label:"Waist"},{key:"hips",label:"Hips"},{key:"shoulder",label:"Shoulder"},{key:"sleeveLength",label:"Sleeve"},{key:"shirtLength",label:"Shirt Length"},{key:"neck",label:"Neck"},{key:"trouserWaist",label:"Trouser Waist"},{key:"trouserLength",label:"Trouser Length"},{key:"thigh",label:"Thigh"},{key:"ankle",label:"Ankle"}].map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:e.label}),x?(0,a.jsx)("input",{type:"number",value:d.measurements?.[e.key]||"",onChange:a=>S(e.key,parseFloat(a.target.value)||void 0),className:"w-full bg-[#111111] border border-[#2a2a2a] px-2 py-1 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}):(0,a.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:d.measurements?.[e.key]||"-"})]},e.key))}),x&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Notes"}),(0,a.jsx)("textarea",{value:d.measurements?.notes||"",onChange:e=>S("notes",e.target.value),rows:2,className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none resize-none",placeholder:"Additional measurement notes..."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,a.jsx)("p",{className:"text-2xl text-[#c9a962] font-[family-name:var(--font-cormorant)]",children:o[d.id]||0}),(0,a.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Total Orders"})]}),(0,a.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,a.jsx)("p",{className:"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:A(d.createdAt)}),(0,a.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Customer Since"})]})]}),x&&(0,a.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-[#1a1a1a]",children:[(0,a.jsx)("button",{onClick:()=>h(!1),className:"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:C,disabled:N,className:"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:N?"Saving...":"Save Changes"})]})]})]})})]})}e.s(["default",()=>l])}]);