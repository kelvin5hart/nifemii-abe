(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19172,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(36180);var s=e.i(98925),r=e.i(59141),n=e.i(57951),o=e.i(22016);let l=e=>{switch(e){case"pending":return"bg-yellow-500/20 text-yellow-400";case"confirmed":return"bg-blue-500/20 text-blue-400";case"in-progress":return"bg-purple-500/20 text-purple-400";case"ready":case"delivered":return"bg-green-500/20 text-green-400";case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-[#2a2a2a] text-[#888888]"}};function i(){let{user:e,setPassword:i}=(0,n.useAuth)(),[c,m]=(0,a.useState)(!1),[d,x]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[p,u]=(0,a.useState)(!1),[b,v]=(0,a.useState)(""),[j,g]=(0,a.useState)(""),[y,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(0),[L,A]=(0,a.useState)(0),[M,P]=(0,a.useState)([]),[B,W]=(0,a.useState)([]),[z,O]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!e?.phone)return void O(!1);let t=(0,s.query)((0,s.collection)(r.db,"orders"),(0,s.where)("userPhone","==",e.phone),(0,s.orderBy)("createdAt","desc"),(0,s.limit)(5)),a=(0,s.onSnapshot)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate?.()||new Date}));C(t.filter(e=>!["delivered","cancelled"].includes(e.status)).length),P(t),O(!1)},()=>{O(!1)}),n=new Date().toISOString().split("T")[0],o=(0,s.query)((0,s.collection)(r.db,"appointments"),(0,s.where)("userPhone","==",e.phone),(0,s.where)("date",">=",n),(0,s.where)("status","in",["pending","confirmed"])),l=(0,s.onSnapshot)(o,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));A(t.length),W(t.slice(0,3))},()=>{});return()=>{a(),l()}},[e?.phone]);let T=async e=>{if(e.preventDefault(),v(""),g(""),d!==f)return void v("Passwords do not match");if(d.length<6)return void v("Password must be at least 6 characters");u(!0);try{let e=await i(d);e.success?(g(e.message),x(""),h(""),m(!1)):v(e.message)}catch{v("Failed to set password. Please try again.")}finally{u(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:["Welcome",e?.name?`, ${e.name}`:"","!"]}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Manage your orders, appointments, and profile"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,t.jsxs)(o.default,{href:"/account/orders",className:"bg-[#111111] border border-[#1a1a1a] p-6 hover:border-[#c9a962]/50 transition-colors",children:[(0,t.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#c9a962] mb-1",children:z?"...":S}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Active Orders"})]}),(0,t.jsxs)(o.default,{href:"/account/appointments",className:"bg-[#111111] border border-[#1a1a1a] p-6 hover:border-[#c9a962]/50 transition-colors",children:[(0,t.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#c9a962] mb-1",children:z?"...":L}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Upcoming Appointments"})]}),(0,t.jsxs)(o.default,{href:"/account/profile",className:"bg-[#111111] border border-[#1a1a1a] p-6 hover:border-[#c9a962]/50 transition-colors",children:[(0,t.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#c9a962] mb-1",children:e?.name?"Complete":"Incomplete"}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Profile"})]})]}),!e?.hasPassword&&(0,t.jsxs)("div",{className:"bg-[#c9a962]/10 border border-[#c9a962]/30 p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-[#c9a962] font-[family-name:var(--font-cormorant)] text-lg mb-1",children:"Set Up Password Login"}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Create a password to sign in faster without OTP each time"})]}),!c&&(0,t.jsx)("button",{onClick:()=>m(!0),className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline whitespace-nowrap ml-4",children:"Set Password"})]}),c&&(0,t.jsxs)("form",{onSubmit:T,className:"mt-4 space-y-4",children:[b&&(0,t.jsx)("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 px-4 py-2 text-sm font-[family-name:var(--font-montserrat)]",children:b}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:y?"text":"password",value:d,onChange:e=>x(e.target.value),required:!0,minLength:6,className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 pr-10 text-[#f5f5f5] focus:border-[#c9a962] focus:outline-none transition-colors font-[family-name:var(--font-montserrat)] text-sm",placeholder:"Min 6 characters"}),(0,t.jsx)("button",{type:"button",onClick:()=>N(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#888888] hover:text-[#c9a962] transition-colors","aria-label":y?"Hide password":"Show password",children:y?(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Confirm Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:w?"text":"password",value:f,onChange:e=>h(e.target.value),required:!0,minLength:6,className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 pr-10 text-[#f5f5f5] focus:border-[#c9a962] focus:outline-none transition-colors font-[family-name:var(--font-montserrat)] text-sm",placeholder:"Repeat password"}),(0,t.jsx)("button",{type:"button",onClick:()=>k(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#888888] hover:text-[#c9a962] transition-colors","aria-label":w?"Hide password":"Show password",children:w?(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:p,className:"bg-[#c9a962] text-[#0a0a0a] px-6 py-2 font-[family-name:var(--font-montserrat)] text-sm uppercase tracking-wider hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:p?"Setting...":"Set Password"}),(0,t.jsx)("button",{type:"button",onClick:()=>{m(!1),x(""),h(""),v("")},className:"text-[#888888] px-4 py-2 font-[family-name:var(--font-montserrat)] text-sm hover:text-[#f5f5f5] transition-colors",children:"Cancel"})]})]})]}),e?.hasPassword&&j&&(0,t.jsx)("div",{className:"bg-green-500/10 border border-green-500/50 text-green-400 px-4 py-3 mb-6 text-sm font-[family-name:var(--font-montserrat)]",children:j}),(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Recent Orders"}),(0,t.jsx)(o.default,{href:"/account/orders",className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline",children:"View All"})]}),z?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-[#c9a962] border-t-transparent rounded-full animate-spin"})}):0===M.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-[#2a2a2a] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)] mb-4",children:"You haven't placed any orders yet"}),(0,t.jsx)(o.default,{href:"/shop",className:"inline-block bg-[#c9a962] text-[#0a0a0a] px-6 py-2 font-[family-name:var(--font-montserrat)] text-sm uppercase tracking-wider hover:bg-[#d4b87a] transition-colors",children:"Browse Shop"})]}):(0,t.jsx)("div",{className:"space-y-3",children:M.map(e=>{let a;return(0,t.jsxs)(o.default,{href:"/account/orders",className:"flex items-center justify-between p-3 bg-[#0a0a0a] hover:bg-[#1a1a1a] transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:["#",e.id.slice(-6).toUpperCase()]}),(0,t.jsx)("p",{className:"text-[#888888] text-xs font-[family-name:var(--font-montserrat)]",children:e.type.replace("-"," ")})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)]",children:(a=e.pricing?.totalAmount||0,new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(a))}),(0,t.jsx)("span",{className:`inline-block px-2 py-0.5 text-xs ${l(e.status)}`,children:e.status})]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Upcoming Appointments"}),(0,t.jsx)(o.default,{href:"/account/appointments",className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline",children:"View All"})]}),z?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-[#c9a962] border-t-transparent rounded-full animate-spin"})}):0===B.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-[#2a2a2a] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)] mb-4",children:"No upcoming appointments"}),(0,t.jsx)(o.default,{href:"/account/appointments/book",className:"inline-block bg-[#c9a962] text-[#0a0a0a] px-6 py-2 font-[family-name:var(--font-montserrat)] text-sm uppercase tracking-wider hover:bg-[#d4b87a] transition-colors",children:"Book Consultation"})]}):(0,t.jsx)("div",{className:"space-y-3",children:B.map(e=>(0,t.jsxs)(o.default,{href:"/account/appointments",className:"flex items-center justify-between p-3 bg-[#0a0a0a] hover:bg-[#1a1a1a] transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] capitalize",children:e.type.replace("-"," ")}),(0,t.jsx)("p",{className:"text-[#888888] text-xs font-[family-name:var(--font-montserrat)]",children:e.timeSlot})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)]",children:e.date}),(0,t.jsx)("span",{className:`inline-block px-2 py-0.5 text-xs ${l(e.status)}`,children:e.status})]})]},e.id))})]})]})}e.s(["default",()=>i])}]);