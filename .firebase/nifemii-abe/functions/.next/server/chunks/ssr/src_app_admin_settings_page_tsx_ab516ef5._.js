module.exports=[87487,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(69387);var d=a.i(60574),e=a.i(20237);let f={type:"flat",flatFee:2e3,freeAbove:1e5,stateFees:{},freeStates:[]},g={workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"],workingHours:{start:"10:00",end:"18:00"},slotDuration:30,blockedDates:[],blockedTimeSlots:[]},h=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],i=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];function j(){let[a,j]=(0,c.useState)(f),[k,l]=(0,c.useState)(g),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({state:"",fee:0}),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)({date:"",startTime:"",endTime:"",reason:""});(0,c.useEffect)(()=>{(async()=>{try{let a=await (0,d.getDoc)((0,d.doc)(e.db,"settings","main"));if(a.exists()){let b=a.data();j(b.delivery||f),l(b.availability||g)}}catch(a){console.error("Error fetching settings:",a)}finally{n(!1)}})()},[]);let y=async()=>{p(!0),r(!1);try{let b={type:a.type};void 0!==a.flatFee&&a.flatFee>0&&(b.flatFee=a.flatFee),void 0!==a.freeAbove&&a.freeAbove>0&&(b.freeAbove=a.freeAbove),a.stateFees&&Object.keys(a.stateFees).length>0&&(b.stateFees=a.stateFees),a.freeStates&&a.freeStates.length>0&&(b.freeStates=a.freeStates);let c=(k.blockedTimeSlots||[]).map(a=>{let b={id:a.id,date:a.date,startTime:a.startTime,endTime:a.endTime};return a.reason&&(b.reason=a.reason),b}),f={workingDays:k.workingDays,workingHours:k.workingHours,slotDuration:k.slotDuration,blockedDates:k.blockedDates,blockedTimeSlots:c};await (0,d.setDoc)((0,d.doc)(e.db,"settings","main"),{delivery:b,availability:f,updatedAt:d.Timestamp.now()}),r(!0),setTimeout(()=>r(!1),3e3)}catch(a){console.error("Error saving settings:",a)}finally{p(!1)}},z=()=>{let a=[],b=parseInt(k.workingHours.start.split(":")[0]),c=parseInt(k.workingHours.end.split(":")[0]);for(let d=b;d<=c;d++)a.push(`${d.toString().padStart(2,"0")}:00`),d<c&&a.push(`${d.toString().padStart(2,"0")}:30`);return a},A=a=>{let[b,c]=a.split(":"),d=parseInt(b);return`${d%12||12}:${c} ${d>=12?"PM":"AM"}`};return m?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-[#888888]",children:"Loading settings..."})}):(0,b.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Settings"}),(0,b.jsx)("button",{onClick:y,disabled:o,className:"bg-[#c9a962] text-[#0a0a0a] px-6 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:o?"Saving...":q?"Saved!":"Save Changes"})]}),(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-6",children:"Delivery Settings"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]",children:"Delivery Fee Type"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{value:"flat",label:"Flat Fee"},{value:"state-based",label:"State-Based"},{value:"free",label:"Free Delivery"}].map(c=>(0,b.jsx)("button",{onClick:()=>j({...a,type:c.value}),className:`py-3 border text-sm font-[family-name:var(--font-montserrat)] transition-colors ${a.type===c.value?"border-[#c9a962] text-[#c9a962] bg-[#c9a962]/10":"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]"}`,children:c.label},c.value))})]}),"flat"===a.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Delivery Fee (₦)"}),(0,b.jsx)("input",{type:"number",value:a.flatFee||"",onChange:b=>j({...a,flatFee:parseFloat(b.target.value)||0}),className:"w-full max-w-xs bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),"state-based"===a.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]",children:"State Delivery Fees"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsxs)("select",{value:s.state,onChange:a=>t({...s,state:a.target.value}),className:"flex-1 bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select state"}),h.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("input",{type:"number",value:s.fee||"",onChange:a=>t({...s,fee:parseFloat(a.target.value)||0}),className:"w-32 bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Fee"}),(0,b.jsx)("button",{onClick:()=>{s.state&&!(s.fee<=0)&&(j({...a,stateFees:{...a.stateFees,[s.state]:s.fee}}),t({state:"",fee:0}))},className:"px-4 py-2 bg-[#c9a962] text-[#0a0a0a] text-sm font-[family-name:var(--font-montserrat)]",children:"Add"})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(a.stateFees||{}).map(([c,d])=>(0,b.jsxs)("div",{className:"flex items-center justify-between bg-[#0a0a0a] border border-[#1a1a1a] px-4 py-2",children:[(0,b.jsx)("span",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:c}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(d)}),(0,b.jsx)("button",{onClick:()=>{let b;return b={...a.stateFees},void(delete b[c],j({...a,stateFees:b}))},className:"text-red-400 text-sm",children:"Remove"})]})]},c))})]}),"free"!==a.type&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Free Delivery for Orders Above (₦)"}),(0,b.jsx)("input",{type:"number",value:a.freeAbove||"",onChange:b=>{let c=parseFloat(b.target.value);if(c>0)j({...a,freeAbove:c});else{let{freeAbove:b,...c}=a;j({...c,freeAbove:0})}},className:"w-full max-w-xs bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Leave empty for no free delivery threshold"})]})]})]}),(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-6",children:"Availability Settings"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]",children:"Working Days"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(a=>(0,b.jsx)("button",{onClick:()=>{var b;return b=a.value,void(k.workingDays.includes(b)?l({...k,workingDays:k.workingDays.filter(a=>a!==b)}):l({...k,workingDays:[...k.workingDays,b]}))},className:`px-4 py-2 border text-sm font-[family-name:var(--font-montserrat)] transition-colors ${k.workingDays.includes(a.value)?"border-[#c9a962] text-[#c9a962] bg-[#c9a962]/10":"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]"}`,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Opening Time"}),(0,b.jsx)("input",{type:"time",value:k.workingHours.start,onChange:a=>l({...k,workingHours:{...k.workingHours,start:a.target.value}}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Closing Time"}),(0,b.jsx)("input",{type:"time",value:k.workingHours.end,onChange:a=>l({...k,workingHours:{...k.workingHours,end:a.target.value}}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Appointment Slot Duration (minutes)"}),(0,b.jsxs)("select",{value:k.slotDuration,onChange:a=>l({...k,slotDuration:parseInt(a.target.value)}),className:"w-full max-w-xs bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:15,children:"15 minutes"}),(0,b.jsx)("option",{value:30,children:"30 minutes"}),(0,b.jsx)("option",{value:45,children:"45 minutes"}),(0,b.jsx)("option",{value:60,children:"1 hour"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Blocked Dates (Full Day Off)"}),(0,b.jsx)("p",{className:"text-xs text-[#666666] mb-3 font-[family-name:var(--font-montserrat)]",children:"Block entire days when you're completely unavailable (e.g., holidays)"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsx)("input",{type:"date",value:u,onChange:a=>v(a.target.value),min:new Date().toISOString().split("T")[0],className:"flex-1 max-w-xs bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}),(0,b.jsx)("button",{onClick:()=>{!u||k.blockedDates.includes(u)||(l({...k,blockedDates:[...k.blockedDates,u].sort()}),v(""))},className:"px-4 py-2 bg-[#c9a962] text-[#0a0a0a] text-sm font-[family-name:var(--font-montserrat)]",children:"Block Date"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:k.blockedDates.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-[#0a0a0a] border border-red-500/30 px-3 py-1",children:[(0,b.jsx)("span",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:new Date(a).toLocaleDateString("en-NG",{day:"numeric",month:"short",year:"numeric"})}),(0,b.jsx)("button",{onClick:()=>{l({...k,blockedDates:k.blockedDates.filter(b=>b!==a)})},className:"text-red-400 text-sm",children:"✕"})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Blocked Time Slots (Partial Day)"}),(0,b.jsx)("p",{className:"text-xs text-[#666666] mb-3 font-[family-name:var(--font-montserrat)]",children:"Block specific hours on a date when you have other commitments but are still partially available"}),(0,b.jsxs)("div",{className:"bg-[#0a0a0a] border border-[#1a1a1a] p-4 mb-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Date"}),(0,b.jsx)("input",{type:"date",value:w.date,onChange:a=>x({...w,date:a.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Reason (optional)"}),(0,b.jsx)("input",{type:"text",value:w.reason,onChange:a=>x({...w,reason:a.target.value}),placeholder:"e.g., Doctor appointment",className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"From"}),(0,b.jsxs)("select",{value:w.startTime,onChange:a=>x({...w,startTime:a.target.value}),className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select time"}),z().map(a=>(0,b.jsx)("option",{value:a,children:A(a)},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"To"}),(0,b.jsxs)("select",{value:w.endTime,onChange:a=>x({...w,endTime:a.target.value}),className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select time"}),z().map(a=>(0,b.jsx)("option",{value:a,children:A(a)},a))]})]})]}),(0,b.jsx)("button",{onClick:()=>{if(!w.date||!w.startTime||!w.endTime)return;if(w.startTime>=w.endTime)return void alert("Start time must be before end time");let a={id:`${w.date}-${w.startTime}-${Date.now()}`,date:w.date,startTime:w.startTime,endTime:w.endTime};w.reason.trim()&&(a.reason=w.reason.trim()),l({...k,blockedTimeSlots:[...k.blockedTimeSlots||[],a]}),x({date:"",startTime:"",endTime:"",reason:""})},disabled:!w.date||!w.startTime||!w.endTime,className:"w-full py-2 bg-[#c9a962] text-[#0a0a0a] text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Block Time Slot"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(k.blockedTimeSlots||[]).sort((a,b)=>a.date.localeCompare(b.date)||a.startTime.localeCompare(b.startTime)).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between bg-[#0a0a0a] border border-orange-500/30 px-4 py-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:new Date(a.date).toLocaleDateString("en-NG",{weekday:"short",day:"numeric",month:"short",year:"numeric"})}),(0,b.jsxs)("p",{className:"text-[#c9a962] text-xs font-[family-name:var(--font-montserrat)]",children:[A(a.startTime)," - ",A(a.endTime),a.reason&&(0,b.jsxs)("span",{className:"text-[#888888] ml-2",children:["(",a.reason,")"]})]})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void l({...k,blockedTimeSlots:(k.blockedTimeSlots||[]).filter(a=>a.id!==b)})},className:"text-red-400 text-sm hover:text-red-300 transition-colors",children:"Remove"})]},a.id)),(!k.blockedTimeSlots||0===k.blockedTimeSlots.length)&&(0,b.jsx)("p",{className:"text-[#666666] text-sm font-[family-name:var(--font-montserrat)] text-center py-4",children:"No blocked time slots"})]})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:y,disabled:o,className:"bg-[#c9a962] text-[#0a0a0a] px-8 py-3 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:o?"Saving...":q?"Saved!":"Save All Changes"})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_admin_settings_page_tsx_ab516ef5._.js.map