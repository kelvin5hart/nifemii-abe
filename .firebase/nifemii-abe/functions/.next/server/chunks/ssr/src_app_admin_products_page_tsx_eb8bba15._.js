module.exports=[631,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(69387);var d=a.i(60574);a.i(60121);var e=a.i(5420),f=a.i(20237),g=a.i(71987),h=a.i(26573);let i={sku:"",name:"",description:"",price:0,images:[],category:"",sizes:{},active:!0};function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)({size:"",stock:0}),[y,z]=(0,c.useState)(!1),A=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=(0,d.query)((0,d.collection)(f.db,"products"),(0,d.orderBy)("createdAt","desc")),b=(0,d.onSnapshot)(a,a=>{j(a.docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date}})),l(!1)});return()=>b()},[]);let B=[...new Set(a.map(a=>a.category).filter(Boolean))],C=a.filter(a=>"all"===s||a.category===s),D=async()=>{if(m){r(!0);try{o?await (0,d.addDoc)((0,d.collection)(f.db,"products"),{...m,createdAt:d.Timestamp.now(),updatedAt:d.Timestamp.now()}):m.id&&await (0,d.updateDoc)((0,d.doc)(f.db,"products",m.id),{...m,updatedAt:d.Timestamp.now()}),n(null)}catch(a){console.error("Error saving product:",a)}finally{r(!1)}}},E=async a=>{if(confirm("Are you sure you want to delete this product?"))try{await (0,d.deleteDoc)((0,d.doc)(f.db,"products",a))}catch(a){console.error("Error deleting product:",a)}},F=async a=>{try{await (0,d.updateDoc)((0,d.doc)(f.db,"products",a.id),{active:!a.active,updatedAt:d.Timestamp.now()})}catch(a){console.error("Error toggling product status:",a)}},G=async a=>{let b=a.target.files;if(!b||0===b.length||!m)return;z(!0);let c=[];try{for(let a of Array.from(b)){if(!a.type.startsWith("image/")){alert(`${a.name} is not an image file`);continue}if(a.size>5242880){alert(`${a.name} is too large. Max size is 5MB`);continue}let b=Date.now(),d=a.name.replace(/[^a-zA-Z0-9.]/g,"_"),g=(0,e.ref)(f.storage,`products/${b}_${d}`);await (0,e.uploadBytes)(g,a);let h=await (0,e.getDownloadURL)(g);c.push(h)}n({...m,images:[...m.images||[],...c]})}catch(a){console.error("Error uploading image:",a),alert("Failed to upload image. Please try again.")}finally{z(!1),A.current&&(A.current.value="")}},H=async a=>{if(!m)return;let b=m.images?.[a];if(b&&b.includes("firebasestorage.googleapis.com"))try{let a=(0,e.ref)(f.storage,b);await (0,e.deleteObject)(a)}catch(a){console.error("Error deleting image from storage:",a)}n({...m,images:m.images?.filter((b,c)=>c!==a)||[]})};return k?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-[#888888]",children:"Loading products..."})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Products"}),(0,b.jsx)("button",{onClick:()=>{let b,c=(b=(a.length+1).toString().padStart(3,"0"),`NA-${b}`);n({...i,sku:c}),p(!0)},className:"bg-[#c9a962] text-[#0a0a0a] px-4 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors",children:"+ Add Product"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-4",children:(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"all",children:"All Categories"}),B.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})}),0===C.length?(0,b.jsx)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-12 text-center",children:(0,b.jsx)("p",{className:"text-[#888888] font-[family-name:var(--font-montserrat)]",children:"No products found"})}):(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:C.map(a=>{let c;return(0,b.jsxs)("div",{className:`bg-[#111111] border ${a.active?"border-[#1a1a1a]":"border-red-500/30"} overflow-hidden`,children:[(0,b.jsxs)("div",{className:"aspect-[4/5] relative bg-[#0a0a0a]",children:[a.images[0]?(0,b.jsx)(g.default,{src:a.images[0],alt:a.name,fill:!0,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-[#888888] text-xs",children:"No image"}),!a.active&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-red-400 text-xs md:text-sm font-[family-name:var(--font-montserrat)]",children:"Inactive"})}),a.sku&&(0,b.jsx)("span",{className:"absolute top-1 right-1 text-[10px] md:text-xs text-[#c9a962] bg-[#0a0a0a]/80 px-1.5 py-0.5 font-[family-name:var(--font-montserrat)]",children:a.sku})]}),(0,b.jsxs)("div",{className:"p-2 md:p-4 space-y-1 md:space-y-2",children:[(0,b.jsx)("h3",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)] text-xs md:text-sm line-clamp-1",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] md:text-sm text-[#888888] font-[family-name:var(--font-montserrat)] line-clamp-1",children:a.category}),(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("span",{className:"text-[#c9a962] font-[family-name:var(--font-montserrat)] text-xs md:text-sm",children:(c=a.salePrice||a.price,new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(c))})}),(0,b.jsxs)("p",{className:"text-[10px] md:text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:["Stock: ",Object.values(a.sizes).reduce((a,b)=>a+b,0)]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-1 md:gap-2 pt-1 md:pt-2",children:[(0,b.jsx)("button",{onClick:()=>{n({...a}),p(!1)},className:"flex-1 text-[#c9a962] border border-[#c9a962] py-1 md:py-1 text-[10px] md:text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#c9a962]/10 transition-colors",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>F(a),className:`flex-1 py-1 md:py-1 text-[10px] md:text-sm border font-[family-name:var(--font-montserrat)] transition-colors ${a.active?"text-[#888888] border-[#2a2a2a] hover:text-yellow-400 hover:border-yellow-400":"text-green-400 border-green-400 hover:bg-green-400/10"}`,children:a.active?"Deactivate":"Activate"})]})]})]},a.id)})}),m&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4",children:(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-2xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-4 md:px-6 py-3 md:py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:o?"Add Product":"Edit Product"}),(0,b.jsx)("button",{onClick:()=>n(null),className:"text-[#888888] hover:text-[#f5f5f5]",children:"✕"})]}),(0,b.jsxs)("div",{className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Product Name"}),(0,b.jsx)("input",{type:"text",value:m.name||"",onChange:a=>n({...m,name:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"SKU/Product Code"}),(0,b.jsx)("input",{type:"text",value:m.sku||"",onChange:a=>n({...m,sku:a.target.value.toUpperCase()}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#c9a962] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"e.g., NA-001"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Description"}),(0,b.jsx)("textarea",{value:m.description||"",onChange:a=>n({...m,description:a.target.value}),rows:3,className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none resize-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs md:text-sm text-[#888888] mb-1 md:mb-2 font-[family-name:var(--font-montserrat)]",children:"Price (₦)"}),(0,b.jsx)("input",{type:"number",value:m.price||"",onChange:a=>n({...m,price:parseFloat(a.target.value)||0}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Sale Price (₦)"}),(0,b.jsx)("input",{type:"number",value:m.salePrice||"",onChange:a=>n({...m,salePrice:parseFloat(a.target.value)||void 0}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Leave empty for no sale"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Category"}),(0,b.jsx)("input",{type:"text",value:m.category||"",onChange:a=>n({...m,category:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"e.g., Dresses, Tops, Suits"})]})]}),(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsx)("h3",{className:"text-sm uppercase tracking-wider text-[#888888] mb-4 font-[family-name:var(--font-montserrat)]",children:"Images"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("input",{type:"file",ref:A,onChange:G,accept:"image/*",multiple:!0,className:"hidden",id:"image-upload"}),(0,b.jsx)("label",{htmlFor:"image-upload",className:`inline-flex items-center gap-2 px-4 py-2 border border-dashed border-[#c9a962] text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] cursor-pointer hover:bg-[#c9a962]/10 transition-colors ${y?"opacity-50 cursor-not-allowed":""}`,children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-[#c9a962] border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Upload Images"]})}),(0,b.jsx)("p",{className:"text-xs text-[#888888] mt-2 font-[family-name:var(--font-montserrat)]",children:"Max 5MB per image. JPG, PNG, WebP supported."})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsx)("input",{type:"url",value:u,onChange:a=>v(a.target.value),className:"flex-1 bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Or paste image URL"}),(0,b.jsx)("button",{onClick:()=>{u&&m&&(n({...m,images:[...m.images||[],u]}),v(""))},className:"px-4 py-2 bg-[#2a2a2a] text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#3a3a3a] transition-colors",children:"Add URL"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:m.images?.map((a,c)=>(0,b.jsxs)("div",{className:"relative w-20 h-20 bg-[#111111] border border-[#2a2a2a] group",children:[(0,b.jsx)(g.default,{src:a,alt:"",fill:!0,className:"object-cover"}),(0,b.jsx)("button",{onClick:()=>H(c),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white text-xs rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:"✕"}),0===c&&(0,b.jsx)("span",{className:"absolute bottom-0 left-0 right-0 bg-[#c9a962] text-[#0a0a0a] text-[10px] text-center font-[family-name:var(--font-montserrat)]",children:"Main"})]},c))})]}),(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsx)("h3",{className:"text-sm uppercase tracking-wider text-[#888888] mb-4 font-[family-name:var(--font-montserrat)]",children:"Sizes & Stock"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-xs text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Quick add standard sizes:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:h.standardSizes.map(a=>{let c=m.sizes&&a in m.sizes;return(0,b.jsxs)("button",{onClick:()=>{c||n({...m,sizes:{...m.sizes,[a]:1}})},disabled:c,className:`px-3 py-1 text-xs font-[family-name:var(--font-montserrat)] border transition-colors ${c?"border-[#2a2a2a] text-[#444444] cursor-not-allowed":"border-[#c9a962] text-[#c9a962] hover:bg-[#c9a962]/10"}`,children:["+ ",a]},a)})})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsx)("input",{type:"text",value:w.size,onChange:a=>x({...w,size:a.target.value.toUpperCase()}),className:"w-24 bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Custom"}),(0,b.jsx)("input",{type:"number",value:w.stock,onChange:a=>x({...w,stock:parseInt(a.target.value)||0}),className:"w-24 bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Stock",min:"0"}),(0,b.jsx)("button",{onClick:()=>{w.size&&m&&(n({...m,sizes:{...m.sizes,[w.size]:w.stock}}),x({size:"",stock:0}))},className:"px-4 py-2 bg-[#c9a962] text-[#0a0a0a] text-sm font-[family-name:var(--font-montserrat)]",children:"Add"})]}),Object.keys(m.sizes||{}).length>0&&(0,b.jsxs)("div",{className:"border-t border-[#1a1a1a] pt-4 mt-4",children:[(0,b.jsx)("p",{className:"text-xs text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Current sizes (click stock to edit):"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(m.sizes||{}).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center gap-1 bg-[#111111] border border-[#2a2a2a] px-2 py-1",children:[(0,b.jsxs)("span",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] font-medium",children:[a,":"]}),(0,b.jsx)("input",{type:"number",value:c,onChange:b=>{let c=parseInt(b.target.value)||0;n({...m,sizes:{...m.sizes,[a]:c}})},min:"0",className:"w-12 bg-transparent border-none text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] focus:outline-none text-center"}),(0,b.jsx)("button",{onClick:()=>(a=>{if(!m||!m.sizes)return;let b={...m.sizes};delete b[a],n({...m,sizes:b})})(a),className:"text-red-400 text-xs hover:text-red-300 ml-1",children:"✕"})]},a))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:m.active??!0,onChange:a=>n({...m,active:a.target.checked}),className:"w-4 h-4 accent-[#c9a962]"}),(0,b.jsx)("span",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:"Active"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:m.featured??!1,onChange:a=>n({...m,featured:a.target.checked}),className:"w-4 h-4 accent-[#c9a962]"}),(0,b.jsx)("span",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:"Featured"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-[#1a1a1a]",children:[(0,b.jsx)("button",{onClick:()=>n(null),className:"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:D,disabled:q||!m.name||!m.price,className:"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:q?"Saving...":"Save Product"})]}),!o&&m.id&&(0,b.jsx)("button",{onClick:()=>{E(m.id),n(null)},className:"w-full text-red-400 text-sm font-[family-name:var(--font-montserrat)] hover:text-red-300",children:"Delete Product"})]})]})})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_app_admin_products_page_tsx_eb8bba15._.js.map