module.exports=[80511,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(69387);var d=a.i(60574),e=a.i(20237),f=a.i(38246);let g=a=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(a),h=a=>(a instanceof d.Timestamp?a.toDate():a).toLocaleDateString("en-NG",{month:"short",day:"numeric",year:"numeric"});function i(){let a,i,j,k,[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)("month");(0,c.useEffect)(()=>{let a=(0,d.query)((0,d.collection)(e.db,"orders"),(0,d.orderBy)("createdAt","desc")),b=(0,d.onSnapshot)(a,a=>{m(a.docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate?.()||new Date,updatedAt:b.updatedAt?.toDate?.()||new Date}})),o(!1)});return()=>b()},[]);let v=()=>{let a,b,c=[];(b=new Date((a=new Date).getFullYear(),a.getMonth(),a.getDate()),l.filter(a=>{if("cancelled"===a.status)return!1;let c=a.createdAt instanceof Date?a.createdAt:new Date;switch(t){case"today":return c>=b;case"week":let d=new Date(b);return d.setDate(d.getDate()-7),c>=d;case"month":let e=new Date(b);return e.setMonth(e.getMonth()-1),c>=e;default:return!0}})).forEach(a=>{let b=a.pricing;if(!b)return;let e={orderId:a.id,orderRef:`#${a.id.slice(0,8)}`,customerName:a.userName||"Unknown",customerPhone:a.userPhone,orderDate:a.createdAt instanceof Date?a.createdAt:new Date};if(void 0!==b.depositAmount&&b.depositAmount>0){c.push({...e,type:"deposit",amount:b.depositAmount,method:b.depositMethod||"pending",status:b.depositPaid?"paid":"pending",date:b.depositDate instanceof d.Timestamp?b.depositDate.toDate():b.depositPaid?a.createdAt instanceof Date?a.createdAt:new Date:void 0});let f=b.balanceAmount||0;f>0&&c.push({...e,type:"balance",amount:f,method:b.balanceMethod||"pending",status:b.balancePaid?"paid":"pending",date:b.balanceDate instanceof d.Timestamp?b.balanceDate.toDate():b.balancePaid?a.updatedAt instanceof Date?a.updatedAt:new Date:void 0})}else c.push({...e,type:"full",amount:b.totalAmount,method:b.depositMethod||a.paymentMethod||"pending",status:b.depositPaid?"paid":"pending",date:b.depositDate instanceof d.Timestamp?b.depositDate.toDate():b.depositPaid?a.createdAt instanceof Date?a.createdAt:new Date:void 0})});let e=c;return"all"!==p&&(e=e.filter(a=>a.method===p)),"all"!==r&&(e=e.filter(a=>a.status===r)),e.sort((a,b)=>{let c=a.date||a.orderDate;return(b.date||b.orderDate).getTime()-c.getTime()})},w=(i=(a=v()).filter(a=>"paid"===a.status).reduce((a,b)=>a+b.amount,0),j=a.filter(a=>"pending"===a.status).reduce((a,b)=>a+b.amount,0),k={},a.filter(a=>"paid"===a.status).forEach(a=>{k[a.method]=(k[a.method]||0)+a.amount}),{paidTotal:i,pendingTotal:j,byMethod:k}),x=v();return n?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-[#888888]",children:"Loading financial data..."})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Finance"}),(0,b.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Track payments received and outstanding"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:"text-green-400",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("span",{className:"text-green-400 text-xs font-[family-name:var(--font-montserrat)]",children:"Received"})]}),(0,b.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-green-400 mb-1",children:g(w.paidTotal)}),(0,b.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Total Paid"})]}),(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:"text-yellow-400",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("span",{className:"text-yellow-400 text-xs font-[family-name:var(--font-montserrat)]",children:"Outstanding"})]}),(0,b.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-yellow-400 mb-1",children:g(w.pendingTotal)}),(0,b.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Pending Payments"})]}),(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:"text-[#c9a962]",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("span",{className:"text-[#c9a962] text-xs font-[family-name:var(--font-montserrat)]",children:"Combined"})]}),(0,b.jsx)("p",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-1",children:g(w.paidTotal+w.pendingTotal)}),(0,b.jsx)("p",{className:"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]",children:"Total Value"})]})]}),Object.keys(w.byMethod).length>0&&(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-4",children:"Revenue by Payment Method"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(w.byMethod).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsx)("p",{className:"text-[#888888] text-xs uppercase tracking-wider font-[family-name:var(--font-montserrat)] mb-2",children:"paystack"===a?"Paystack (Online)":a.charAt(0).toUpperCase()+a.slice(1)}),(0,b.jsx)("p",{className:"text-[#c9a962] text-lg font-[family-name:var(--font-montserrat)]",children:g(c)})]},a))})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"today",children:"Today"}),(0,b.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,b.jsx)("option",{value:"month",children:"Last 30 Days"}),(0,b.jsx)("option",{value:"all",children:"All Time"})]}),(0,b.jsxs)("select",{value:r,onChange:a=>s(a.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"all",children:"All Status"}),(0,b.jsx)("option",{value:"paid",children:"Paid Only"}),(0,b.jsx)("option",{value:"pending",children:"Pending Only"})]}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",children:[(0,b.jsx)("option",{value:"all",children:"All Methods"}),(0,b.jsx)("option",{value:"paystack",children:"Paystack"}),(0,b.jsx)("option",{value:"cash",children:"Cash"}),(0,b.jsx)("option",{value:"transfer",children:"Transfer"})]})]}),(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b border-[#1a1a1a]",children:(0,b.jsxs)("h2",{className:"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:["Payment Records (",x.length,")"]})}),0===x.length?(0,b.jsx)("div",{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-[#888888] font-[family-name:var(--font-montserrat)]",children:"No payment records found for the selected filters"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"md:hidden divide-y divide-[#1a1a1a]",children:x.map((a,c)=>(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.default,{href:"/admin/orders",className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline",children:a.orderRef}),(0,b.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] mt-1",children:a.customerName})]}),(0,b.jsx)("span",{className:`px-2 py-1 text-xs border font-[family-name:var(--font-montserrat)] ${"paid"===a.status?"bg-green-500/20 text-green-400 border-green-500/50":"bg-yellow-500/20 text-yellow-400 border-yellow-500/50"}`,children:a.status})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[#c9a962] font-[family-name:var(--font-montserrat)]",children:g(a.amount)}),(0,b.jsxs)("span",{className:"text-[#888888] font-[family-name:var(--font-montserrat)] capitalize",children:[a.type," Â· ",a.method||"-"]})]}),a.date&&(0,b.jsx)("p",{className:"text-xs text-[#666666] mt-2 font-[family-name:var(--font-montserrat)]",children:h(a.date)})]},`${a.orderId}-${a.type}-${c}`))}),(0,b.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-[#0a0a0a] border-b border-[#1a1a1a]",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Order"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Customer"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Type"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Amount"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Method"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Status"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Date"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-[#1a1a1a]",children:x.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-[#1a1a1a]/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)(f.default,{href:"/admin/orders",className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline",children:a.orderRef})}),(0,b.jsxs)("td",{className:"px-4 py-4",children:[(0,b.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:a.customerName}),(0,b.jsx)("p",{className:"text-[#888888] text-xs font-[family-name:var(--font-montserrat)]",children:a.customerPhone})]}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)] capitalize",children:a.type}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:g(a.amount)}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm font-[family-name:var(--font-montserrat)] capitalize",children:"pending"===a.status?(0,b.jsx)("span",{className:"text-[#666666]",children:"-"}):(0,b.jsx)("span",{className:"text-[#888888]",children:"paystack"===a.method?"Paystack":a.method})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs border font-[family-name:var(--font-montserrat)] ${"paid"===a.status?"bg-green-500/20 text-green-400 border-green-500/50":"bg-yellow-500/20 text-yellow-400 border-yellow-500/50"}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:a.date?h(a.date):"-"})]},`${a.orderId}-${a.type}-${c}`))})]})})]})]})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_app_admin_finance_page_tsx_ba16d1e7._.js.map