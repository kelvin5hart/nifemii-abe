module.exports=[66795,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(69387);var d=a.i(60574),e=a.i(20237),f=a.i(1802);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)({}),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({phone:"",name:"",email:""}),[v,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=(0,d.query)((0,d.collection)(e.db,"users"),(0,d.orderBy)("createdAt","desc")),b=(0,d.onSnapshot)(a,a=>{g(a.docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date}}).filter(a=>!a.isAdmin)),k(!1)}),c=(0,d.query)((0,d.collection)(e.db,"orders")),f=(0,d.onSnapshot)(c,a=>{let b={};a.docs.forEach(a=>{let c=a.data().userId;b[c]=(b[c]||0)+1}),i(b)});return()=>{b(),f()}},[]);let x=a.filter(a=>{if(!p)return!0;let b=p.toLowerCase();return a.name?.toLowerCase().includes(b)||a.phone.includes(b)||a.email?.toLowerCase().includes(b)}),y=async()=>{if(t.phone&&t.name){w(!0);try{let a=(0,f.formatPhoneNumber)(t.phone),b=(0,d.query)((0,d.collection)(e.db,"users"),(0,d.where)("phone","==",a));if(!(await (0,d.getDocs)(b)).empty){alert("A customer with this phone number already exists"),w(!1);return}await (0,d.addDoc)((0,d.collection)(e.db,"users"),{phone:a,name:t.name,email:t.email||null,createdAt:d.Timestamp.now(),createdBy:"admin"}),u({phone:"",name:"",email:""}),s(!1)}catch(a){console.error("Error creating customer:",a)}finally{w(!1)}}},z=async()=>{if(l){w(!0);try{await (0,d.updateDoc)((0,d.doc)(e.db,"users",l.id),{name:l.name||null,email:l.email||null,measurements:l.measurements||null,updatedAt:d.Timestamp.now()}),o(!1)}catch(a){console.error("Error updating customer:",a)}finally{w(!1)}}},A=(a,b)=>{l&&m({...l,measurements:{...l.measurements,[a]:b}})},B=a=>new Intl.DateTimeFormat("en-NG",{day:"numeric",month:"short",year:"numeric"}).format(a);return j?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"text-[#888888]",children:"Loading customers..."})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Customers"}),(0,b.jsx)("button",{onClick:()=>s(!0),className:"bg-[#c9a962] text-[#0a0a0a] px-4 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors",children:"+ Add Customer"})]}),(0,b.jsx)("div",{children:(0,b.jsx)("input",{type:"text",value:p,onChange:a=>q(a.target.value),className:"w-full max-w-md bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"Search by name, phone, or email..."})}),0===x.length?(0,b.jsx)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-12 text-center",children:(0,b.jsx)("p",{className:"text-[#888888] font-[family-name:var(--font-montserrat)]",children:"No customers found"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"md:hidden space-y-4",children:x.map(a=>(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:a.name||"No name"}),(0,b.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:a.phone})]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 ${a.measurements?"bg-green-500/20 text-green-400":"bg-[#2a2a2a] text-[#888888]"} font-[family-name:var(--font-montserrat)]`,children:a.measurements?"Measurements":"No measurements"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]",children:[(0,b.jsxs)("span",{children:[h[a.id]||0," orders"]}),(0,b.jsxs)("span",{children:["Joined ",B(a.createdAt)]})]}),(0,b.jsx)("button",{onClick:()=>{m(a),o(!1)},className:"w-full bg-[#1a1a1a] text-[#c9a962] py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#222222] transition-colors",children:"View Details"})]},a.id))}),(0,b.jsx)("div",{className:"hidden md:block bg-[#111111] border border-[#1a1a1a] overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-[#0a0a0a] border-b border-[#1a1a1a]",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Customer"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Phone"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Orders"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Measurements"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Joined"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-[#1a1a1a]",children:x.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-[#1a1a1a]/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:a.name||"No name"}),a.email&&(0,b.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:a.email})]})}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:a.phone}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:h[a.id]||0}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:`text-xs px-2 py-1 ${a.measurements?"bg-green-500/20 text-green-400":"bg-[#2a2a2a] text-[#888888]"} font-[family-name:var(--font-montserrat)]`,children:a.measurements?"Saved":"Not set"})}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]",children:B(a.createdAt)}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("button",{onClick:()=>{m(a),o(!1)},className:"text-[#c9a962] hover:text-[#d4b87a] text-sm font-[family-name:var(--font-montserrat)]",children:"View"})})]},a.id))})]})})})]}),r&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4",children:(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-md max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none",children:[(0,b.jsxs)("div",{className:"border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Add Customer"}),(0,b.jsx)("button",{onClick:()=>s(!1),className:"text-[#888888] hover:text-[#f5f5f5]",children:"✕"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Phone Number *"}),(0,b.jsx)("input",{type:"tel",value:t.phone,onChange:a=>u({...t,phone:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none",placeholder:"08012345678"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Full Name *"}),(0,b.jsx)("input",{type:"text",value:t.name,onChange:a=>u({...t,name:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]",children:"Email (optional)"}),(0,b.jsx)("input",{type:"email",value:t.email,onChange:a=>u({...t,email:a.target.value}),className:"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)("button",{onClick:()=>s(!1),className:"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:y,disabled:v||!t.phone||!t.name,className:"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:v?"Creating...":"Create Customer"})]})]})]})}),l&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4",children:(0,b.jsxs)("div",{className:"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-2xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-4 md:px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]",children:"Customer Details"}),(0,b.jsx)("button",{onClick:()=>{m(null),o(!1)},className:"text-[#888888] hover:text-[#f5f5f5]",children:"✕"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsx)("h3",{className:"text-sm uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Contact Information"}),!n&&(0,b.jsx)("button",{onClick:()=>o(!0),className:"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)]",children:"Edit"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Phone"}),(0,b.jsx)("p",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:l.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Name"}),n?(0,b.jsx)("input",{type:"text",value:l.name||"",onChange:a=>m({...l,name:a.target.value}),className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}):(0,b.jsx)("p",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:l.name||"Not set"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Email"}),n?(0,b.jsx)("input",{type:"email",value:l.email||"",onChange:a=>m({...l,email:a.target.value}),className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}):(0,b.jsx)("p",{className:"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:l.email||"Not set"})]})]})]}),(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,b.jsx)("h3",{className:"text-sm uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Measurements (inches)"})}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{key:"chest",label:"Chest"},{key:"waist",label:"Waist"},{key:"hips",label:"Hips"},{key:"shoulder",label:"Shoulder"},{key:"sleeveLength",label:"Sleeve"},{key:"shirtLength",label:"Shirt Length"},{key:"neck",label:"Neck"},{key:"trouserWaist",label:"Trouser Waist"},{key:"trouserLength",label:"Trouser Length"},{key:"thigh",label:"Thigh"},{key:"ankle",label:"Ankle"}].map(a=>(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:a.label}),n?(0,b.jsx)("input",{type:"number",value:l.measurements?.[a.key]||"",onChange:b=>A(a.key,parseFloat(b.target.value)||void 0),className:"w-full bg-[#111111] border border-[#2a2a2a] px-2 py-1 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none"}):(0,b.jsx)("p",{className:"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]",children:l.measurements?.[a.key]||"-"})]},a.key))}),n&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("label",{className:"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]",children:"Notes"}),(0,b.jsx)("textarea",{value:l.measurements?.notes||"",onChange:a=>A("notes",a.target.value),rows:2,className:"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none resize-none",placeholder:"Additional measurement notes..."})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsx)("p",{className:"text-2xl text-[#c9a962] font-[family-name:var(--font-cormorant)]",children:h[l.id]||0}),(0,b.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Total Orders"})]}),(0,b.jsxs)("div",{className:"bg-[#0a0a0a] p-4 border border-[#1a1a1a]",children:[(0,b.jsx)("p",{className:"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]",children:B(l.createdAt)}),(0,b.jsx)("p",{className:"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]",children:"Customer Since"})]})]}),n&&(0,b.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-[#1a1a1a]",children:[(0,b.jsx)("button",{onClick:()=>o(!1),className:"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:z,disabled:v,className:"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50",children:v?"Saving...":"Save Changes"})]})]})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_admin_customers_page_tsx_24abc0f3._.js.map