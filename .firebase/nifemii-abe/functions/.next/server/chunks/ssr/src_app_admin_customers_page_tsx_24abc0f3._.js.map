{"version":3,"sources":["../../../../src/app/admin/customers/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  collection,\n  query,\n  orderBy,\n  onSnapshot,\n  doc,\n  updateDoc,\n  addDoc,\n  Timestamp,\n  where,\n  getDocs,\n} from \"firebase/firestore\";\nimport { db } from \"@/lib/firebase\";\nimport { User, Measurements, Order } from \"@/lib/firebase-types\";\nimport { formatPhoneNumber } from \"@/lib/otp-service\";\n\nexport default function AdminCustomersPage() {\n  const [customers, setCustomers] = useState<User[]>([]);\n  const [orders, setOrders] = useState<Record<string, number>>({});\n  const [loading, setLoading] = useState(true);\n  const [selectedCustomer, setSelectedCustomer] = useState<User | null>(null);\n  const [editMode, setEditMode] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [showNewCustomerForm, setShowNewCustomerForm] = useState(false);\n\n  // New customer form state\n  const [newCustomer, setNewCustomer] = useState({\n    phone: \"\",\n    name: \"\",\n    email: \"\",\n  });\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    // Fetch customers (non-admin users)\n    const customersQuery = query(\n      collection(db, \"users\"),\n      orderBy(\"createdAt\", \"desc\")\n    );\n\n    const unsubscribe = onSnapshot(customersQuery, (snapshot) => {\n      const customersData = snapshot.docs\n        .map((doc) => {\n          const data = doc.data();\n          return {\n            id: doc.id,\n            ...data,\n            createdAt: data.createdAt?.toDate() || new Date(),\n            updatedAt: data.updatedAt?.toDate() || new Date(),\n          } as User;\n        })\n        .filter((user) => !user.isAdmin);\n      setCustomers(customersData);\n      setLoading(false);\n    });\n\n    // Fetch order counts\n    const ordersQuery = query(collection(db, \"orders\"));\n    const unsubOrders = onSnapshot(ordersQuery, (snapshot) => {\n      const orderCounts: Record<string, number> = {};\n      snapshot.docs.forEach((doc) => {\n        const userId = doc.data().userId;\n        orderCounts[userId] = (orderCounts[userId] || 0) + 1;\n      });\n      setOrders(orderCounts);\n    });\n\n    return () => {\n      unsubscribe();\n      unsubOrders();\n    };\n  }, []);\n\n  const filteredCustomers = customers.filter((customer) => {\n    if (!searchQuery) return true;\n    const query = searchQuery.toLowerCase();\n    return (\n      customer.name?.toLowerCase().includes(query) ||\n      customer.phone.includes(query) ||\n      customer.email?.toLowerCase().includes(query)\n    );\n  });\n\n  const handleCreateCustomer = async () => {\n    if (!newCustomer.phone || !newCustomer.name) return;\n\n    setSaving(true);\n    try {\n      const formattedPhone = formatPhoneNumber(newCustomer.phone);\n\n      // Check if customer already exists\n      const existingQuery = query(\n        collection(db, \"users\"),\n        where(\"phone\", \"==\", formattedPhone)\n      );\n      const existing = await getDocs(existingQuery);\n\n      if (!existing.empty) {\n        alert(\"A customer with this phone number already exists\");\n        setSaving(false);\n        return;\n      }\n\n      await addDoc(collection(db, \"users\"), {\n        phone: formattedPhone,\n        name: newCustomer.name,\n        email: newCustomer.email || null,\n        createdAt: Timestamp.now(),\n        createdBy: \"admin\",\n      });\n\n      setNewCustomer({ phone: \"\", name: \"\", email: \"\" });\n      setShowNewCustomerForm(false);\n    } catch (error) {\n      console.error(\"Error creating customer:\", error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleUpdateCustomer = async () => {\n    if (!selectedCustomer) return;\n\n    setSaving(true);\n    try {\n      await updateDoc(doc(db, \"users\", selectedCustomer.id), {\n        name: selectedCustomer.name || null,\n        email: selectedCustomer.email || null,\n        measurements: selectedCustomer.measurements || null,\n        updatedAt: Timestamp.now(),\n      });\n      setEditMode(false);\n    } catch (error) {\n      console.error(\"Error updating customer:\", error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const updateMeasurement = (key: keyof Measurements, value: number | string | undefined) => {\n    if (!selectedCustomer) return;\n    setSelectedCustomer({\n      ...selectedCustomer,\n      measurements: {\n        ...selectedCustomer.measurements,\n        [key]: value,\n      },\n    });\n  };\n\n  const formatDate = (date: Date) => {\n    return new Intl.DateTimeFormat(\"en-NG\", {\n      day: \"numeric\",\n      month: \"short\",\n      year: \"numeric\",\n    }).format(date);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-[#888888]\">Loading customers...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <h1 className=\"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n          Customers\n        </h1>\n        <button\n          onClick={() => setShowNewCustomerForm(true)}\n          className=\"bg-[#c9a962] text-[#0a0a0a] px-4 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors\"\n        >\n          + Add Customer\n        </button>\n      </div>\n\n      {/* Search */}\n      <div>\n        <input\n          type=\"text\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"w-full max-w-md bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n          placeholder=\"Search by name, phone, or email...\"\n        />\n      </div>\n\n      {/* Customers List */}\n      {filteredCustomers.length === 0 ? (\n        <div className=\"bg-[#111111] border border-[#1a1a1a] p-12 text-center\">\n          <p className=\"text-[#888888] font-[family-name:var(--font-montserrat)]\">\n            No customers found\n          </p>\n        </div>\n      ) : (\n        <>\n          {/* Mobile Card View */}\n          <div className=\"md:hidden space-y-4\">\n            {filteredCustomers.map((customer) => (\n              <div\n                key={customer.id}\n                className=\"bg-[#111111] border border-[#1a1a1a] p-4\"\n              >\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div>\n                    <p className=\"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                      {customer.name || \"No name\"}\n                    </p>\n                    <p className=\"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      {customer.phone}\n                    </p>\n                  </div>\n                  <span\n                    className={`text-xs px-2 py-1 ${\n                      customer.measurements\n                        ? \"bg-green-500/20 text-green-400\"\n                        : \"bg-[#2a2a2a] text-[#888888]\"\n                    } font-[family-name:var(--font-montserrat)]`}\n                  >\n                    {customer.measurements ? \"Measurements\" : \"No measurements\"}\n                  </span>\n                </div>\n\n                <div className=\"flex items-center justify-between text-xs text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]\">\n                  <span>{orders[customer.id] || 0} orders</span>\n                  <span>Joined {formatDate(customer.createdAt)}</span>\n                </div>\n\n                <button\n                  onClick={() => {\n                    setSelectedCustomer(customer);\n                    setEditMode(false);\n                  }}\n                  className=\"w-full bg-[#1a1a1a] text-[#c9a962] py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#222222] transition-colors\"\n                >\n                  View Details\n                </button>\n              </div>\n            ))}\n          </div>\n\n          {/* Desktop Table View */}\n          <div className=\"hidden md:block bg-[#111111] border border-[#1a1a1a] overflow-hidden\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-[#0a0a0a] border-b border-[#1a1a1a]\">\n                  <tr>\n                    <th className=\"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      Customer\n                    </th>\n                    <th className=\"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      Phone\n                    </th>\n                    <th className=\"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      Orders\n                    </th>\n                    <th className=\"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      Measurements\n                    </th>\n                    <th className=\"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      Joined\n                    </th>\n                    <th className=\"text-left px-4 py-3 text-xs uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-[#1a1a1a]\">\n                  {filteredCustomers.map((customer) => (\n                    <tr\n                      key={customer.id}\n                      className=\"hover:bg-[#1a1a1a]/50 transition-colors\"\n                    >\n                      <td className=\"px-4 py-4\">\n                        <div>\n                          <p className=\"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                            {customer.name || \"No name\"}\n                          </p>\n                          {customer.email && (\n                            <p className=\"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                              {customer.email}\n                            </p>\n                          )}\n                        </div>\n                      </td>\n                      <td className=\"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                        {customer.phone}\n                      </td>\n                      <td className=\"px-4 py-4 text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                        {orders[customer.id] || 0}\n                      </td>\n                      <td className=\"px-4 py-4\">\n                        <span\n                          className={`text-xs px-2 py-1 ${\n                            customer.measurements\n                              ? \"bg-green-500/20 text-green-400\"\n                              : \"bg-[#2a2a2a] text-[#888888]\"\n                          } font-[family-name:var(--font-montserrat)]`}\n                        >\n                          {customer.measurements ? \"Saved\" : \"Not set\"}\n                        </span>\n                      </td>\n                      <td className=\"px-4 py-4 text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                        {formatDate(customer.createdAt)}\n                      </td>\n                      <td className=\"px-4 py-4\">\n                        <button\n                          onClick={() => {\n                            setSelectedCustomer(customer);\n                            setEditMode(false);\n                          }}\n                          className=\"text-[#c9a962] hover:text-[#d4b87a] text-sm font-[family-name:var(--font-montserrat)]\"\n                        >\n                          View\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </>\n      )}\n\n      {/* New Customer Modal */}\n      {showNewCustomerForm && (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4\">\n          <div className=\"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-md max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none\">\n            <div className=\"border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between\">\n              <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                Add Customer\n              </h2>\n              <button\n                onClick={() => setShowNewCustomerForm(false)}\n                className=\"text-[#888888] hover:text-[#f5f5f5]\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  Phone Number *\n                </label>\n                <input\n                  type=\"tel\"\n                  value={newCustomer.phone}\n                  onChange={(e) =>\n                    setNewCustomer({ ...newCustomer, phone: e.target.value })\n                  }\n                  className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                  placeholder=\"08012345678\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  Full Name *\n                </label>\n                <input\n                  type=\"text\"\n                  value={newCustomer.name}\n                  onChange={(e) =>\n                    setNewCustomer({ ...newCustomer, name: e.target.value })\n                  }\n                  className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  Email (optional)\n                </label>\n                <input\n                  type=\"email\"\n                  value={newCustomer.email}\n                  onChange={(e) =>\n                    setNewCustomer({ ...newCustomer, email: e.target.value })\n                  }\n                  className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                />\n              </div>\n\n              <div className=\"flex gap-4 pt-4\">\n                <button\n                  onClick={() => setShowNewCustomerForm(false)}\n                  className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleCreateCustomer}\n                  disabled={saving || !newCustomer.phone || !newCustomer.name}\n                  className=\"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50\"\n                >\n                  {saving ? \"Creating...\" : \"Create Customer\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Customer Detail Modal */}\n      {selectedCustomer && (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-end md:items-center justify-center md:p-4\">\n          <div className=\"bg-[#111111] border border-[#1a1a1a] w-full md:max-w-2xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto rounded-t-xl md:rounded-none\">\n            <div className=\"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-4 md:px-6 py-4 flex items-center justify-between\">\n              <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                Customer Details\n              </h2>\n              <button\n                onClick={() => {\n                  setSelectedCustomer(null);\n                  setEditMode(false);\n                }}\n                className=\"text-[#888888] hover:text-[#f5f5f5]\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Basic Info */}\n              <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <h3 className=\"text-sm uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                    Contact Information\n                  </h3>\n                  {!editMode && (\n                    <button\n                      onClick={() => setEditMode(true)}\n                      className=\"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)]\"\n                    >\n                      Edit\n                    </button>\n                  )}\n                </div>\n                <div className=\"space-y-3\">\n                  <div>\n                    <label className=\"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]\">\n                      Phone\n                    </label>\n                    <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                      {selectedCustomer.phone}\n                    </p>\n                  </div>\n                  <div>\n                    <label className=\"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]\">\n                      Name\n                    </label>\n                    {editMode ? (\n                      <input\n                        type=\"text\"\n                        value={selectedCustomer.name || \"\"}\n                        onChange={(e) =>\n                          setSelectedCustomer({\n                            ...selectedCustomer,\n                            name: e.target.value,\n                          })\n                        }\n                        className=\"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                      />\n                    ) : (\n                      <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                        {selectedCustomer.name || \"Not set\"}\n                      </p>\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]\">\n                      Email\n                    </label>\n                    {editMode ? (\n                      <input\n                        type=\"email\"\n                        value={selectedCustomer.email || \"\"}\n                        onChange={(e) =>\n                          setSelectedCustomer({\n                            ...selectedCustomer,\n                            email: e.target.value,\n                          })\n                        }\n                        className=\"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                      />\n                    ) : (\n                      <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                        {selectedCustomer.email || \"Not set\"}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Measurements */}\n              <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <h3 className=\"text-sm uppercase tracking-wider text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                    Measurements (inches)\n                  </h3>\n                </div>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                  {[\n                    { key: \"chest\", label: \"Chest\" },\n                    { key: \"waist\", label: \"Waist\" },\n                    { key: \"hips\", label: \"Hips\" },\n                    { key: \"shoulder\", label: \"Shoulder\" },\n                    { key: \"sleeveLength\", label: \"Sleeve\" },\n                    { key: \"shirtLength\", label: \"Shirt Length\" },\n                    { key: \"neck\", label: \"Neck\" },\n                    { key: \"trouserWaist\", label: \"Trouser Waist\" },\n                    { key: \"trouserLength\", label: \"Trouser Length\" },\n                    { key: \"thigh\", label: \"Thigh\" },\n                    { key: \"ankle\", label: \"Ankle\" },\n                  ].map((field) => (\n                    <div key={field.key}>\n                      <label className=\"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]\">\n                        {field.label}\n                      </label>\n                      {editMode ? (\n                        <input\n                          type=\"number\"\n                          value={\n                            (selectedCustomer.measurements as Record<string, number | undefined>)?.[\n                              field.key\n                            ] || \"\"\n                          }\n                          onChange={(e) =>\n                            updateMeasurement(\n                              field.key as keyof Measurements,\n                              parseFloat(e.target.value) || undefined\n                            )\n                          }\n                          className=\"w-full bg-[#111111] border border-[#2a2a2a] px-2 py-1 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                        />\n                      ) : (\n                        <p className=\"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]\">\n                          {(selectedCustomer.measurements as Record<string, number | undefined>)?.[\n                            field.key\n                          ] || \"-\"}\n                        </p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n                {editMode && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]\">\n                      Notes\n                    </label>\n                    <textarea\n                      value={selectedCustomer.measurements?.notes || \"\"}\n                      onChange={(e) => updateMeasurement(\"notes\", e.target.value)}\n                      rows={2}\n                      className=\"w-full bg-[#111111] border border-[#2a2a2a] px-3 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none resize-none\"\n                      placeholder=\"Additional measurement notes...\"\n                    />\n                  </div>\n                )}\n              </div>\n\n              {/* Stats */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                  <p className=\"text-2xl text-[#c9a962] font-[family-name:var(--font-cormorant)]\">\n                    {orders[selectedCustomer.id] || 0}\n                  </p>\n                  <p className=\"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                    Total Orders\n                  </p>\n                </div>\n                <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                  <p className=\"text-sm text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                    {formatDate(selectedCustomer.createdAt)}\n                  </p>\n                  <p className=\"text-xs text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                    Customer Since\n                  </p>\n                </div>\n              </div>\n\n              {/* Actions */}\n              {editMode && (\n                <div className=\"flex gap-4 pt-4 border-t border-[#1a1a1a]\">\n                  <button\n                    onClick={() => setEditMode(false)}\n                    className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleUpdateCustomer}\n                    disabled={saving}\n                    className=\"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50\"\n                  >\n                    {saving ? \"Saving...\" : \"Save Changes\"}\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}