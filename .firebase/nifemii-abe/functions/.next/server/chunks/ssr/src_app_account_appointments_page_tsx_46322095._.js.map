{"version":3,"sources":["../../../../src/app/account/appointments/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  collection,\n  query,\n  where,\n  orderBy,\n  onSnapshot,\n  addDoc,\n  updateDoc,\n  Timestamp,\n  doc,\n} from \"firebase/firestore\";\nimport { db } from \"@/lib/firebase\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport {\n  Appointment,\n  AppointmentStatus,\n  AppointmentType,\n  AvailabilitySettings,\n} from \"@/lib/firebase-types\";\n\nconst statusColors: Record<AppointmentStatus, string> = {\n  pending: \"bg-yellow-500/20 text-yellow-400 border-yellow-500/50\",\n  confirmed: \"bg-blue-500/20 text-blue-400 border-blue-500/50\",\n  completed: \"bg-green-500/20 text-green-400 border-green-500/50\",\n  cancelled: \"bg-red-500/20 text-red-400 border-red-500/50\",\n  rescheduled: \"bg-purple-500/20 text-purple-400 border-purple-500/50\",\n};\n\nconst typeLabels: Record<AppointmentType, string> = {\n  consultation: \"Consultation\",\n  fitting: \"Fitting\",\n  pickup: \"Pickup\",\n  \"fabric-dropoff\": \"Fabric Drop-off\",\n};\n\nconst typeDescriptions: Record<AppointmentType, string> = {\n  consultation: \"Discuss your style ideas and get expert recommendations\",\n  fitting: \"Try on your outfit and make any necessary adjustments\",\n  pickup: \"Collect your completed order from the studio\",\n  \"fabric-dropoff\": \"Bring your fabric for a sew-only order\",\n};\n\nconst defaultAvailability: AvailabilitySettings = {\n  workingDays: [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"],\n  workingHours: { start: \"10:00\", end: \"18:00\" },\n  slotDuration: 30,\n  blockedDates: [],\n  blockedTimeSlots: [],\n};\n\nexport default function CustomerAppointmentsPage() {\n  const { user } = useAuth();\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [availability, setAvailability] = useState<AvailabilitySettings>(defaultAvailability);\n  const [loading, setLoading] = useState(true);\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  // Booking form\n  const [bookingType, setBookingType] = useState<AppointmentType>(\"consultation\");\n  const [bookingDate, setBookingDate] = useState(\"\");\n  const [bookingTime, setBookingTime] = useState(\"\");\n  const [bookingNotes, setBookingNotes] = useState(\"\");\n\n  // Cancel/Reschedule state\n  const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\n  const [showCancelConfirm, setShowCancelConfirm] = useState(false);\n  const [showRescheduleModal, setShowRescheduleModal] = useState(false);\n  const [rescheduleDate, setRescheduleDate] = useState(\"\");\n  const [rescheduleTime, setRescheduleTime] = useState(\"\");\n  const [actionLoading, setActionLoading] = useState(false);\n\n  useEffect(() => {\n    if (!user?.phone) return;\n\n    // Fetch appointments\n    const appointmentsQuery = query(\n      collection(db, \"appointments\"),\n      where(\"userPhone\", \"==\", user.phone),\n      orderBy(\"date\", \"desc\")\n    );\n\n    const unsubscribe = onSnapshot(appointmentsQuery, (snapshot) => {\n      const appointmentsData = snapshot.docs.map((docSnap) => {\n        const data = docSnap.data();\n        return {\n          id: docSnap.id,\n          ...data,\n          createdAt: data.createdAt?.toDate() || new Date(),\n        } as Appointment;\n      });\n      setAppointments(appointmentsData);\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [user?.phone]);\n\n  // Fetch availability settings with real-time updates\n  useEffect(() => {\n    const unsubSettings = onSnapshot(doc(db, \"settings\", \"main\"), (docSnap) => {\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        if (data.availability) {\n          // Merge with defaults to ensure all fields exist\n          setAvailability({\n            ...defaultAvailability,\n            ...data.availability,\n            blockedTimeSlots: data.availability.blockedTimeSlots || [],\n          });\n        }\n      }\n    });\n\n    return () => unsubSettings();\n  }, []);\n\n  // Fetch all appointments for checking booked slots\n  const [allAppointments, setAllAppointments] = useState<Appointment[]>([]);\n\n  useEffect(() => {\n    // Fetch all non-cancelled appointments to check for booked slots\n    const allAppointmentsQuery = query(\n      collection(db, \"appointments\"),\n      where(\"status\", \"in\", [\"pending\", \"confirmed\", \"rescheduled\"])\n    );\n\n    const unsubAllAppointments = onSnapshot(allAppointmentsQuery, (snapshot) => {\n      const appointmentsData = snapshot.docs.map((docSnap) => ({\n        id: docSnap.id,\n        ...docSnap.data(),\n      })) as Appointment[];\n      setAllAppointments(appointmentsData);\n    });\n\n    return () => unsubAllAppointments();\n  }, []);\n\n  const generateTimeSlots = () => {\n    const slots: string[] = [];\n    const [startHour, startMin] = availability.workingHours.start.split(\":\").map(Number);\n    const [endHour, endMin] = availability.workingHours.end.split(\":\").map(Number);\n    const duration = availability.slotDuration;\n\n    let currentTime = startHour * 60 + startMin;\n    const endTime = endHour * 60 + endMin;\n\n    while (currentTime < endTime) {\n      const hours = Math.floor(currentTime / 60);\n      const mins = currentTime % 60;\n      slots.push(`${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`);\n      currentTime += duration;\n    }\n\n    return slots;\n  };\n\n  // Check if a specific time slot is blocked by admin on a given date\n  const isTimeSlotBlocked = (dateStr: string, timeSlot: string) => {\n    const blockedSlots = availability.blockedTimeSlots || [];\n    const slotTime = parseInt(timeSlot.replace(\":\", \"\"));\n\n    return blockedSlots.some((blocked) => {\n      if (blocked.date !== dateStr) return false;\n\n      const blockStart = parseInt(blocked.startTime.replace(\":\", \"\"));\n      const blockEnd = parseInt(blocked.endTime.replace(\":\", \"\"));\n\n      // Check if the time slot falls within the blocked period\n      return slotTime >= blockStart && slotTime < blockEnd;\n    });\n  };\n\n  // Check if a time slot is already booked by someone\n  const isTimeSlotBooked = (dateStr: string, timeSlot: string, excludeAppointmentId?: string) => {\n    return allAppointments.some((apt) => {\n      if (excludeAppointmentId && apt.id === excludeAppointmentId) return false;\n      return apt.date === dateStr && apt.timeSlot === timeSlot;\n    });\n  };\n\n  // Check if a time slot is unavailable (blocked OR booked)\n  const isTimeSlotUnavailable = (dateStr: string, timeSlot: string, excludeAppointmentId?: string) => {\n    return isTimeSlotBlocked(dateStr, timeSlot) || isTimeSlotBooked(dateStr, timeSlot, excludeAppointmentId);\n  };\n\n  // Get available time slots for a given date (excluding blocked and booked slots)\n  const getAvailableTimeSlots = (dateStr: string, excludeAppointmentId?: string) => {\n    const allSlots = generateTimeSlots();\n    return allSlots.filter((slot) => !isTimeSlotUnavailable(dateStr, slot, excludeAppointmentId));\n  };\n\n  const isDateAvailable = (dateStr: string) => {\n    const date = new Date(dateStr);\n    const dayName = date.toLocaleDateString(\"en-US\", { weekday: \"long\" }).toLowerCase();\n\n    // Check if it's a working day\n    if (!availability.workingDays.includes(dayName)) return false;\n\n    // Check if it's blocked\n    if (availability.blockedDates.includes(dateStr)) return false;\n\n    return true;\n  };\n\n  const handleBookAppointment = async () => {\n    if (!user?.phone || !bookingDate || !bookingTime) return;\n\n    setSaving(true);\n    try {\n      await addDoc(collection(db, \"appointments\"), {\n        userId: user.id,\n        userPhone: user.phone,\n        userName: user.name || null,\n        type: bookingType,\n        date: bookingDate,\n        timeSlot: bookingTime,\n        status: \"pending\",\n        notes: bookingNotes || null,\n        createdBy: \"customer\",\n        createdAt: Timestamp.now(),\n      });\n\n      setShowBookingModal(false);\n      setBookingType(\"consultation\");\n      setBookingDate(\"\");\n      setBookingTime(\"\");\n      setBookingNotes(\"\");\n    } catch (error) {\n      console.error(\"Error booking appointment:\", error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const formatDateDisplay = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(\"en-NG\", {\n      weekday: \"long\",\n      day: \"numeric\",\n      month: \"long\",\n      year: \"numeric\",\n    });\n  };\n\n  const upcomingAppointments = appointments.filter(\n    (a) => new Date(a.date) >= new Date() && ![\"cancelled\", \"completed\"].includes(a.status)\n  );\n  const pastAppointments = appointments.filter(\n    (a) => new Date(a.date) < new Date() || [\"cancelled\", \"completed\"].includes(a.status)\n  );\n\n  const canModifyAppointment = (apt: Appointment) => {\n    // Can only cancel/reschedule pending or confirmed appointments\n    return [\"pending\", \"confirmed\"].includes(apt.status);\n  };\n\n  const handleCancelAppointment = async () => {\n    if (!selectedAppointment) return;\n\n    setActionLoading(true);\n    try {\n      await updateDoc(doc(db, \"appointments\", selectedAppointment.id), {\n        status: \"cancelled\",\n        updatedAt: Timestamp.now(),\n      });\n      setShowCancelConfirm(false);\n      setSelectedAppointment(null);\n    } catch (error) {\n      console.error(\"Error cancelling appointment:\", error);\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleRescheduleAppointment = async () => {\n    if (!selectedAppointment || !rescheduleDate || !rescheduleTime) return;\n\n    setActionLoading(true);\n    try {\n      await updateDoc(doc(db, \"appointments\", selectedAppointment.id), {\n        date: rescheduleDate,\n        timeSlot: rescheduleTime,\n        status: \"pending\", // Reset to pending for admin review\n        updatedAt: Timestamp.now(),\n      });\n      setShowRescheduleModal(false);\n      setSelectedAppointment(null);\n      setRescheduleDate(\"\");\n      setRescheduleTime(\"\");\n    } catch (error) {\n      console.error(\"Error rescheduling appointment:\", error);\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const openRescheduleModal = (apt: Appointment) => {\n    setSelectedAppointment(apt);\n    setRescheduleDate(apt.date);\n    setRescheduleTime(apt.timeSlot);\n    setShowRescheduleModal(true);\n  };\n\n  const openCancelConfirm = (apt: Appointment) => {\n    setSelectedAppointment(apt);\n    setShowCancelConfirm(true);\n  };\n\n  // Generate minimum date (today)\n  const today = new Date().toISOString().split(\"T\")[0];\n\n  return (\n    <>\n      <div>\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8\">\n          <div>\n            <h1 className=\"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n              Appointments\n            </h1>\n            <p className=\"text-[#888888] text-sm font-[family-name:var(--font-montserrat)]\">\n              Schedule and manage your appointments\n            </p>\n          </div>\n          <button\n            onClick={() => setShowBookingModal(true)}\n            className=\"bg-[#c9a962] text-[#0a0a0a] px-4 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors\"\n          >\n            Book Appointment\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"text-[#888888]\">Loading appointments...</div>\n          </div>\n        ) : appointments.length === 0 ? (\n          <div className=\"bg-[#111111] border border-[#1a1a1a] p-12 text-center\">\n            <svg\n              className=\"w-16 h-16 text-[#2a2a2a] mx-auto mb-4\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={1}\n                d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n              />\n            </svg>\n            <p className=\"text-[#888888] font-[family-name:var(--font-montserrat)] mb-4\">\n              No appointments scheduled\n            </p>\n            <button\n              onClick={() => setShowBookingModal(true)}\n              className=\"inline-block bg-[#c9a962] text-[#0a0a0a] px-6 py-2 font-[family-name:var(--font-montserrat)] text-sm uppercase tracking-wider hover:bg-[#d4b87a] transition-colors\"\n            >\n              Book Your First Appointment\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-8\">\n            {/* Upcoming Appointments */}\n            {upcomingAppointments.length > 0 && (\n              <div>\n                <h2 className=\"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-4\">\n                  Upcoming ({upcomingAppointments.length})\n                </h2>\n                <div className=\"space-y-4\">\n                  {upcomingAppointments.map((apt) => (\n                    <div\n                      key={apt.id}\n                      className=\"bg-[#111111] border border-[#1a1a1a] p-4\"\n                    >\n                      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n                        <div className=\"flex items-start gap-4\">\n                          <div className=\"text-center bg-[#0a0a0a] p-3 border border-[#1a1a1a]\">\n                            <p className=\"text-2xl text-[#c9a962] font-[family-name:var(--font-cormorant)]\">\n                              {new Date(apt.date).getDate()}\n                            </p>\n                            <p className=\"text-xs text-[#888888] font-[family-name:var(--font-montserrat)] uppercase\">\n                              {new Date(apt.date).toLocaleDateString(\"en-US\", { month: \"short\" })}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                              {typeLabels[apt.type]}\n                            </p>\n                            <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                              {apt.timeSlot} •{\" \"}\n                              {new Date(apt.date).toLocaleDateString(\"en-NG\", {\n                                weekday: \"long\",\n                              })}\n                            </p>\n                            {apt.notes && (\n                              <p className=\"text-sm text-[#666666] mt-1 font-[family-name:var(--font-montserrat)]\">\n                                Note: {apt.notes}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <span\n                            className={`px-3 py-1 text-xs border ${statusColors[apt.status]} font-[family-name:var(--font-montserrat)]`}\n                          >\n                            {apt.status}\n                          </span>\n                          {canModifyAppointment(apt) && (\n                            <div className=\"flex gap-2\">\n                              <button\n                                onClick={() => openRescheduleModal(apt)}\n                                className=\"text-[#c9a962] text-sm font-[family-name:var(--font-montserrat)] hover:underline\"\n                              >\n                                Reschedule\n                              </button>\n                              <button\n                                onClick={() => openCancelConfirm(apt)}\n                                className=\"text-red-400 text-sm font-[family-name:var(--font-montserrat)] hover:underline\"\n                              >\n                                Cancel\n                              </button>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Past Appointments */}\n            {pastAppointments.length > 0 && (\n              <div>\n                <h2 className=\"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-4\">\n                  Past Appointments\n                </h2>\n                <div className=\"bg-[#111111] border border-[#1a1a1a] divide-y divide-[#1a1a1a]\">\n                  {pastAppointments.map((apt) => (\n                    <div key={apt.id} className=\"p-4\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-2\">\n                        <div>\n                          <span className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                            {typeLabels[apt.type]}\n                          </span>\n                          <span className=\"text-[#888888] text-sm ml-3 font-[family-name:var(--font-montserrat)]\">\n                            {formatDateDisplay(apt.date)} at {apt.timeSlot}\n                          </span>\n                        </div>\n                        <span\n                          className={`px-2 py-0.5 text-xs border ${statusColors[apt.status]} font-[family-name:var(--font-montserrat)]`}\n                        >\n                          {apt.status}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Booking Modal */}\n        {showBookingModal && (\n          <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-[#111111] border border-[#1a1a1a] w-full max-w-md max-h-[90vh] overflow-y-auto\">\n              <div className=\"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between\">\n                <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                  Book Appointment\n                </h2>\n                <button\n                  onClick={() => setShowBookingModal(false)}\n                  className=\"text-[#888888] hover:text-[#f5f5f5]\"\n                >\n                  ✕\n                </button>\n              </div>\n\n              <div className=\"p-6 space-y-6\">\n                {/* Appointment Type */}\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]\">\n                    What do you need?\n                  </label>\n                  <div className=\"space-y-2\">\n                    {(Object.keys(typeLabels) as AppointmentType[]).map((type) => (\n                      <button\n                        key={type}\n                        onClick={() => setBookingType(type)}\n                        className={`w-full text-left p-3 border transition-colors ${\n                          bookingType === type\n                            ? \"border-[#c9a962] bg-[#c9a962]/10\"\n                            : \"border-[#2a2a2a] hover:border-[#3a3a3a]\"\n                        }`}\n                      >\n                        <p\n                          className={`font-[family-name:var(--font-montserrat)] ${\n                            bookingType === type ? \"text-[#c9a962]\" : \"text-[#f5f5f5]\"\n                          }`}\n                        >\n                          {typeLabels[type]}\n                        </p>\n                        <p className=\"text-xs text-[#888888] font-[family-name:var(--font-montserrat)] mt-1\">\n                          {typeDescriptions[type]}\n                        </p>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Date */}\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Select Date\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={bookingDate}\n                    onChange={(e) => {\n                      setBookingDate(e.target.value);\n                      setBookingTime(\"\"); // Reset time when date changes\n                    }}\n                    min={today}\n                    className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                  />\n                  {bookingDate && !isDateAvailable(bookingDate) && (\n                    <p className=\"text-red-400 text-xs mt-2 font-[family-name:var(--font-montserrat)]\">\n                      This date is not available. Please select another date.\n                    </p>\n                  )}\n                </div>\n\n                {/* Time */}\n                {bookingDate && isDateAvailable(bookingDate) && (\n                  <div>\n                    <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                      Select Time\n                    </label>\n                    <div className=\"grid grid-cols-4 gap-2\">\n                      {generateTimeSlots().map((slot) => {\n                        const isBlocked = isTimeSlotBlocked(bookingDate, slot);\n                        const isBooked = isTimeSlotBooked(bookingDate, slot);\n                        const isUnavailable = isBlocked || isBooked;\n                        return (\n                          <button\n                            key={slot}\n                            onClick={() => !isUnavailable && setBookingTime(slot)}\n                            disabled={isUnavailable}\n                            className={`py-2 text-sm border font-[family-name:var(--font-montserrat)] transition-colors ${\n                              isUnavailable\n                                ? \"border-[#1a1a1a] text-[#444444] bg-[#1a1a1a] cursor-not-allowed\"\n                                : bookingTime === slot\n                                ? \"border-[#c9a962] text-[#c9a962] bg-[#c9a962]/10\"\n                                : \"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]\"\n                            }`}\n                          >\n                            {slot}\n                            {isBooked && !isBlocked && <span className=\"block text-[9px]\">Booked</span>}\n                            {isBlocked && <span className=\"block text-[9px]\">Unavailable</span>}\n                          </button>\n                        );\n                      })}\n                    </div>\n                    {getAvailableTimeSlots(bookingDate).length === 0 && (\n                      <p className=\"text-orange-400 text-xs mt-2 font-[family-name:var(--font-montserrat)]\">\n                        No available time slots on this date. Please select another date.\n                      </p>\n                    )}\n                  </div>\n                )}\n\n                {/* Notes */}\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Additional Notes (optional)\n                  </label>\n                  <textarea\n                    value={bookingNotes}\n                    onChange={(e) => setBookingNotes(e.target.value)}\n                    rows={2}\n                    className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none resize-none\"\n                    placeholder=\"Any special requests or notes...\"\n                  />\n                </div>\n\n                {/* Summary */}\n                {bookingDate && bookingTime && (\n                  <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                    <p className=\"text-xs text-[#666666] mb-2 font-[family-name:var(--font-montserrat)]\">\n                      Your Appointment\n                    </p>\n                    <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                      {typeLabels[bookingType]}\n                    </p>\n                    <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      {formatDateDisplay(bookingDate)} at {bookingTime}\n                    </p>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => setShowBookingModal(false)}\n                    className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleBookAppointment}\n                    disabled={\n                      saving || !bookingDate || !bookingTime || !isDateAvailable(bookingDate) || isTimeSlotUnavailable(bookingDate, bookingTime)\n                    }\n                    className=\"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50\"\n                  >\n                    {saving ? \"Booking...\" : \"Confirm Booking\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Cancel Confirmation Modal */}\n        {showCancelConfirm && selectedAppointment && (\n          <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-[#111111] border border-[#1a1a1a] w-full max-w-sm p-6\">\n              <h3 className=\"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-4\">\n                Cancel Appointment\n              </h3>\n              <p className=\"text-[#888888] text-sm font-[family-name:var(--font-montserrat)] mb-2\">\n                Are you sure you want to cancel your{\" \"}\n                <span className=\"text-[#f5f5f5]\">{typeLabels[selectedAppointment.type]}</span>{\" \"}\n                appointment?\n              </p>\n              <p className=\"text-[#888888] text-sm font-[family-name:var(--font-montserrat)] mb-6\">\n                Scheduled for{\" \"}\n                <span className=\"text-[#f5f5f5]\">\n                  {formatDateDisplay(selectedAppointment.date)} at {selectedAppointment.timeSlot}\n                </span>\n              </p>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => {\n                    setShowCancelConfirm(false);\n                    setSelectedAppointment(null);\n                  }}\n                  disabled={actionLoading}\n                  className=\"flex-1 border border-[#2a2a2a] text-[#f5f5f5] py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#1a1a1a] transition-colors disabled:opacity-50\"\n                >\n                  Keep Appointment\n                </button>\n                <button\n                  onClick={handleCancelAppointment}\n                  disabled={actionLoading}\n                  className=\"flex-1 bg-red-500 text-white py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-red-600 transition-colors disabled:opacity-50\"\n                >\n                  {actionLoading ? \"Cancelling...\" : \"Yes, Cancel\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Reschedule Modal */}\n        {showRescheduleModal && selectedAppointment && (\n          <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-[#111111] border border-[#1a1a1a] w-full max-w-md max-h-[90vh] overflow-y-auto\">\n              <div className=\"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between\">\n                <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                  Reschedule Appointment\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowRescheduleModal(false);\n                    setSelectedAppointment(null);\n                    setRescheduleDate(\"\");\n                    setRescheduleTime(\"\");\n                  }}\n                  className=\"text-[#888888] hover:text-[#f5f5f5]\"\n                >\n                  ✕\n                </button>\n              </div>\n\n              <div className=\"p-6 space-y-6\">\n                {/* Current appointment info */}\n                <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                  <p className=\"text-xs text-[#666666] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Current Appointment\n                  </p>\n                  <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                    {typeLabels[selectedAppointment.type]}\n                  </p>\n                  <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                    {formatDateDisplay(selectedAppointment.date)} at {selectedAppointment.timeSlot}\n                  </p>\n                </div>\n\n                {/* New Date */}\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Select New Date\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={rescheduleDate}\n                    onChange={(e) => {\n                      setRescheduleDate(e.target.value);\n                      setRescheduleTime(\"\"); // Reset time when date changes\n                    }}\n                    min={today}\n                    className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                  />\n                  {rescheduleDate && !isDateAvailable(rescheduleDate) && (\n                    <p className=\"text-red-400 text-xs mt-2 font-[family-name:var(--font-montserrat)]\">\n                      This date is not available. Please select another date.\n                    </p>\n                  )}\n                </div>\n\n                {/* New Time */}\n                {rescheduleDate && isDateAvailable(rescheduleDate) && (\n                  <div>\n                    <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                      Select New Time\n                    </label>\n                    <div className=\"grid grid-cols-4 gap-2\">\n                      {generateTimeSlots().map((slot) => {\n                        const isBlocked = isTimeSlotBlocked(rescheduleDate, slot);\n                        const isBooked = isTimeSlotBooked(rescheduleDate, slot, selectedAppointment?.id);\n                        const isUnavailable = isBlocked || isBooked;\n                        return (\n                          <button\n                            key={slot}\n                            onClick={() => !isUnavailable && setRescheduleTime(slot)}\n                            disabled={isUnavailable}\n                            className={`py-2 text-sm border font-[family-name:var(--font-montserrat)] transition-colors relative ${\n                              isUnavailable\n                                ? \"border-[#1a1a1a] text-[#444444] bg-[#1a1a1a] cursor-not-allowed\"\n                                : rescheduleTime === slot\n                                ? \"border-[#c9a962] text-[#c9a962] bg-[#c9a962]/10\"\n                                : \"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]\"\n                            }`}\n                          >\n                            <span className={isUnavailable ? \"line-through\" : \"\"}>{slot}</span>\n                            {isBooked && !isBlocked && (\n                              <span className=\"absolute -top-1 -right-1 text-[8px] bg-orange-500/80 text-white px-1 rounded\">\n                                Booked\n                              </span>\n                            )}\n                            {isBlocked && (\n                              <span className=\"absolute -top-1 -right-1 text-[8px] bg-red-500/80 text-white px-1 rounded\">\n                                Unavailable\n                              </span>\n                            )}\n                          </button>\n                        );\n                      })}\n                    </div>\n                    {getAvailableTimeSlots(rescheduleDate, selectedAppointment?.id).length === 0 && (\n                      <p className=\"text-orange-400 text-xs mt-2 font-[family-name:var(--font-montserrat)]\">\n                        No available time slots on this date. Please select another date.\n                      </p>\n                    )}\n                  </div>\n                )}\n\n                {/* New appointment summary */}\n                {rescheduleDate && rescheduleTime && (\n                  <div className=\"bg-[#c9a962]/10 p-4 border border-[#c9a962]/30\">\n                    <p className=\"text-xs text-[#c9a962] mb-2 font-[family-name:var(--font-montserrat)]\">\n                      New Appointment\n                    </p>\n                    <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                      {typeLabels[selectedAppointment.type]}\n                    </p>\n                    <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      {formatDateDisplay(rescheduleDate)} at {rescheduleTime}\n                    </p>\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowRescheduleModal(false);\n                      setSelectedAppointment(null);\n                      setRescheduleDate(\"\");\n                      setRescheduleTime(\"\");\n                    }}\n                    disabled={actionLoading}\n                    className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors disabled:opacity-50\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleRescheduleAppointment}\n                    disabled={\n                      actionLoading ||\n                      !rescheduleDate ||\n                      !rescheduleTime ||\n                      !isDateAvailable(rescheduleDate) ||\n                      isTimeSlotUnavailable(rescheduleDate, rescheduleTime, selectedAppointment?.id) ||\n                      (rescheduleDate === selectedAppointment.date &&\n                        rescheduleTime === selectedAppointment.timeSlot)\n                    }\n                    className=\"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50\"\n                  >\n                    {actionLoading ? \"Rescheduling...\" : \"Confirm Reschedule\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}