{"version":3,"sources":["../../../../src/app/admin/appointments/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  collection,\n  query,\n  orderBy,\n  onSnapshot,\n  doc,\n  updateDoc,\n  addDoc,\n  deleteDoc,\n  Timestamp,\n  where,\n  getDocs,\n  getDoc,\n} from \"firebase/firestore\";\nimport { db } from \"@/lib/firebase\";\nimport { Appointment, AppointmentStatus, AppointmentType, AvailabilitySettings } from \"@/lib/firebase-types\";\nimport { formatPhoneNumber } from \"@/lib/otp-service\";\n\nconst statusColors: Record<AppointmentStatus, string> = {\n  pending: \"bg-yellow-500/20 text-yellow-400 border-yellow-500/50\",\n  confirmed: \"bg-blue-500/20 text-blue-400 border-blue-500/50\",\n  completed: \"bg-green-500/20 text-green-400 border-green-500/50\",\n  cancelled: \"bg-red-500/20 text-red-400 border-red-500/50\",\n  rescheduled: \"bg-purple-500/20 text-purple-400 border-purple-500/50\",\n};\n\nconst typeLabels: Record<AppointmentType, string> = {\n  consultation: \"Consultation\",\n  fitting: \"Fitting\",\n  pickup: \"Pickup\",\n  \"fabric-dropoff\": \"Fabric Drop-off\",\n};\n\nconst typeDescriptions: Record<AppointmentType, string> = {\n  consultation: \"Initial meeting to discuss style ideas and requirements\",\n  fitting: \"Try on outfit and make any necessary adjustments\",\n  pickup: \"Customer collection of completed order\",\n  \"fabric-dropoff\": \"Customer brings fabric for sew-only order\",\n};\n\nconst defaultAvailability: AvailabilitySettings = {\n  workingDays: [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\"],\n  workingHours: { start: \"10:00\", end: \"18:00\" },\n  slotDuration: 30,\n  blockedDates: [],\n  blockedTimeSlots: [],\n};\n\nexport default function AdminAppointmentsPage() {\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [availability, setAvailability] = useState<AvailabilitySettings>(defaultAvailability);\n  const [loading, setLoading] = useState(true);\n  const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\n  const [showNewForm, setShowNewForm] = useState(false);\n  const [filterStatus, setFilterStatus] = useState<AppointmentStatus | \"all\">(\"all\");\n  const [filterDate, setFilterDate] = useState<string>(\"\");\n\n  // New appointment form\n  const [newAppointment, setNewAppointment] = useState({\n    customerPhone: \"\",\n    customerName: \"\",\n    type: \"consultation\" as AppointmentType,\n    date: \"\",\n    timeSlot: \"\",\n    notes: \"\",\n  });\n  const [saving, setSaving] = useState(false);\n  const [customerLookup, setCustomerLookup] = useState<{ id: string; name: string; phone: string } | null>(null);\n  const [lookingUp, setLookingUp] = useState(false);\n\n  // Reschedule state\n  const [showRescheduleModal, setShowRescheduleModal] = useState(false);\n  const [rescheduleDate, setRescheduleDate] = useState(\"\");\n  const [rescheduleTime, setRescheduleTime] = useState(\"\");\n\n  const today = new Date().toISOString().split(\"T\")[0];\n\n  useEffect(() => {\n    const appointmentsQuery = query(\n      collection(db, \"appointments\"),\n      orderBy(\"date\", \"asc\")\n    );\n\n    const unsubscribe = onSnapshot(appointmentsQuery, (snapshot) => {\n      const appointmentsData = snapshot.docs.map((doc) => {\n        const data = doc.data();\n        return {\n          id: doc.id,\n          ...data,\n          createdAt: data.createdAt?.toDate() || new Date(),\n          updatedAt: data.updatedAt?.toDate() || new Date(),\n        } as Appointment;\n      });\n      setAppointments(appointmentsData);\n      setLoading(false);\n    });\n\n    // Fetch availability settings\n    const fetchSettings = async () => {\n      try {\n        const settingsDoc = await getDoc(doc(db, \"settings\", \"main\"));\n        if (settingsDoc.exists() && settingsDoc.data().availability) {\n          setAvailability(settingsDoc.data().availability as AvailabilitySettings);\n        }\n      } catch (error) {\n        console.error(\"Error fetching settings:\", error);\n      }\n    };\n    fetchSettings();\n\n    return () => unsubscribe();\n  }, []);\n\n  // Look up customer when phone changes\n  const handlePhoneLookup = async (phone: string) => {\n    setNewAppointment({ ...newAppointment, customerPhone: phone });\n\n    if (phone.length >= 10) {\n      setLookingUp(true);\n      try {\n        const formattedPhone = formatPhoneNumber(phone);\n        const existingQuery = query(\n          collection(db, \"users\"),\n          where(\"phone\", \"==\", formattedPhone)\n        );\n        const existing = await getDocs(existingQuery);\n\n        if (!existing.empty) {\n          const userData = existing.docs[0].data();\n          setCustomerLookup({\n            id: existing.docs[0].id,\n            name: userData.name || \"\",\n            phone: formattedPhone,\n          });\n          // Auto-fill name if found\n          if (userData.name && !newAppointment.customerName) {\n            setNewAppointment(prev => ({ ...prev, customerPhone: phone, customerName: userData.name }));\n          }\n        } else {\n          setCustomerLookup(null);\n        }\n      } catch (error) {\n        console.error(\"Error looking up customer:\", error);\n      } finally {\n        setLookingUp(false);\n      }\n    } else {\n      setCustomerLookup(null);\n    }\n  };\n\n  const filteredAppointments = appointments.filter((apt) => {\n    if (filterStatus !== \"all\" && apt.status !== filterStatus) return false;\n    if (filterDate && apt.date !== filterDate) return false;\n    return true;\n  });\n\n  // Group appointments by date\n  const groupedAppointments = filteredAppointments.reduce(\n    (groups, apt) => {\n      const date = apt.date;\n      if (!groups[date]) groups[date] = [];\n      groups[date].push(apt);\n      return groups;\n    },\n    {} as Record<string, Appointment[]>\n  );\n\n  // Check if date is available\n  const isDateAvailable = (dateStr: string) => {\n    const date = new Date(dateStr);\n    const dayName = date.toLocaleDateString(\"en-US\", { weekday: \"long\" }).toLowerCase();\n\n    if (!availability.workingDays.includes(dayName)) return false;\n    if (availability.blockedDates.includes(dateStr)) return false;\n\n    return true;\n  };\n\n  // Generate time slots based on availability settings\n  const generateTimeSlots = () => {\n    const slots: string[] = [];\n    const [startHour, startMinute] = availability.workingHours.start.split(\":\").map(Number);\n    const [endHour, endMinute] = availability.workingHours.end.split(\":\").map(Number);\n    const duration = availability.slotDuration;\n\n    let currentMinutes = startHour * 60 + startMinute;\n    const endMinutes = endHour * 60 + endMinute;\n\n    while (currentMinutes + duration <= endMinutes) {\n      const hours = Math.floor(currentMinutes / 60);\n      const minutes = currentMinutes % 60;\n      slots.push(`${hours.toString().padStart(2, \"0\")}:${minutes.toString().padStart(2, \"0\")}`);\n      currentMinutes += duration;\n    }\n\n    return slots;\n  };\n\n  // Get booked slots for a date\n  const getBookedSlots = (dateStr: string) => {\n    return appointments\n      .filter(apt => apt.date === dateStr && ![\"cancelled\"].includes(apt.status))\n      .map(apt => apt.timeSlot);\n  };\n\n  // Check if a specific time slot is blocked on a given date\n  const isTimeSlotBlocked = (dateStr: string, timeSlot: string) => {\n    const blockedSlots = availability.blockedTimeSlots || [];\n    const slotTime = parseInt(timeSlot.replace(\":\", \"\"));\n\n    return blockedSlots.some((blocked) => {\n      if (blocked.date !== dateStr) return false;\n\n      const blockStart = parseInt(blocked.startTime.replace(\":\", \"\"));\n      const blockEnd = parseInt(blocked.endTime.replace(\":\", \"\"));\n\n      // Check if the time slot falls within the blocked period\n      return slotTime >= blockStart && slotTime < blockEnd;\n    });\n  };\n\n  // Get the reason for a blocked time slot\n  const getBlockedSlotReason = (dateStr: string, timeSlot: string) => {\n    const blockedSlots = availability.blockedTimeSlots || [];\n    const slotTime = parseInt(timeSlot.replace(\":\", \"\"));\n\n    const blockedSlot = blockedSlots.find((blocked) => {\n      if (blocked.date !== dateStr) return false;\n\n      const blockStart = parseInt(blocked.startTime.replace(\":\", \"\"));\n      const blockEnd = parseInt(blocked.endTime.replace(\":\", \"\"));\n\n      return slotTime >= blockStart && slotTime < blockEnd;\n    });\n\n    return blockedSlot?.reason || \"Unavailable\";\n  };\n\n  const handleCreateAppointment = async () => {\n    if (!newAppointment.customerPhone || !newAppointment.date || !newAppointment.timeSlot)\n      return;\n\n    setSaving(true);\n    try {\n      const formattedPhone = formatPhoneNumber(newAppointment.customerPhone);\n\n      // Find or reference customer\n      let userId = customerLookup?.id || \"\";\n      let userName = newAppointment.customerName || customerLookup?.name || null;\n\n      await addDoc(collection(db, \"appointments\"), {\n        userId,\n        userPhone: formattedPhone,\n        userName,\n        type: newAppointment.type,\n        date: newAppointment.date,\n        timeSlot: newAppointment.timeSlot,\n        status: \"pending\",\n        notes: newAppointment.notes || null,\n        createdBy: \"admin\",\n        createdAt: Timestamp.now(),\n      });\n\n      setNewAppointment({\n        customerPhone: \"\",\n        customerName: \"\",\n        type: \"consultation\",\n        date: \"\",\n        timeSlot: \"\",\n        notes: \"\",\n      });\n      setCustomerLookup(null);\n      setShowNewForm(false);\n    } catch (error) {\n      console.error(\"Error creating appointment:\", error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleUpdateStatus = async (appointmentId: string, newStatus: AppointmentStatus) => {\n    try {\n      await updateDoc(doc(db, \"appointments\", appointmentId), {\n        status: newStatus,\n        updatedAt: Timestamp.now(),\n      });\n      if (selectedAppointment?.id === appointmentId) {\n        setSelectedAppointment({ ...selectedAppointment, status: newStatus });\n      }\n    } catch (error) {\n      console.error(\"Error updating appointment status:\", error);\n    }\n  };\n\n  const handleReschedule = async () => {\n    if (!selectedAppointment || !rescheduleDate || !rescheduleTime) return;\n\n    try {\n      await updateDoc(doc(db, \"appointments\", selectedAppointment.id), {\n        date: rescheduleDate,\n        timeSlot: rescheduleTime,\n        status: \"rescheduled\",\n        updatedAt: Timestamp.now(),\n      });\n      setSelectedAppointment({\n        ...selectedAppointment,\n        date: rescheduleDate,\n        timeSlot: rescheduleTime,\n        status: \"rescheduled\",\n      });\n      setShowRescheduleModal(false);\n      setRescheduleDate(\"\");\n      setRescheduleTime(\"\");\n    } catch (error) {\n      console.error(\"Error rescheduling appointment:\", error);\n    }\n  };\n\n  const handleDelete = async (appointmentId: string) => {\n    if (!confirm(\"Are you sure you want to delete this appointment?\")) return;\n\n    try {\n      await deleteDoc(doc(db, \"appointments\", appointmentId));\n      setSelectedAppointment(null);\n    } catch (error) {\n      console.error(\"Error deleting appointment:\", error);\n    }\n  };\n\n  const formatDateDisplay = (dateStr: string) => {\n    const date = new Date(dateStr);\n    const todayDate = new Date();\n    const tomorrow = new Date(todayDate);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n\n    if (dateStr === todayDate.toISOString().split(\"T\")[0]) {\n      return \"Today\";\n    } else if (dateStr === tomorrow.toISOString().split(\"T\")[0]) {\n      return \"Tomorrow\";\n    }\n\n    return new Intl.DateTimeFormat(\"en-NG\", {\n      weekday: \"short\",\n      day: \"numeric\",\n      month: \"short\",\n    }).format(date);\n  };\n\n  const openRescheduleModal = () => {\n    if (selectedAppointment) {\n      setRescheduleDate(selectedAppointment.date);\n      setRescheduleTime(selectedAppointment.timeSlot);\n      setShowRescheduleModal(true);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-[#888888]\">Loading appointments...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <h1 className=\"text-2xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n          Appointments\n        </h1>\n        <button\n          onClick={() => setShowNewForm(true)}\n          className=\"bg-[#c9a962] text-[#0a0a0a] px-4 py-2 text-sm font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors\"\n        >\n          + Schedule Appointment\n        </button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex flex-wrap gap-4\">\n        <select\n          value={filterStatus}\n          onChange={(e) => setFilterStatus(e.target.value as AppointmentStatus | \"all\")}\n          className=\"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n        >\n          <option value=\"all\">All Statuses</option>\n          <option value=\"pending\">Pending</option>\n          <option value=\"confirmed\">Confirmed</option>\n          <option value=\"completed\">Completed</option>\n          <option value=\"cancelled\">Cancelled</option>\n          <option value=\"rescheduled\">Rescheduled</option>\n        </select>\n\n        <input\n          type=\"date\"\n          value={filterDate}\n          onChange={(e) => setFilterDate(e.target.value)}\n          className=\"bg-[#111111] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n        />\n\n        {filterDate && (\n          <button\n            onClick={() => setFilterDate(\"\")}\n            className=\"text-[#888888] text-sm font-[family-name:var(--font-montserrat)] hover:text-[#f5f5f5]\"\n          >\n            Clear date\n          </button>\n        )}\n      </div>\n\n      {/* Appointments by Date */}\n      {Object.keys(groupedAppointments).length === 0 ? (\n        <div className=\"bg-[#111111] border border-[#1a1a1a] p-12 text-center\">\n          <p className=\"text-[#888888] font-[family-name:var(--font-montserrat)]\">\n            No appointments found\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {Object.entries(groupedAppointments)\n            .sort(([a], [b]) => a.localeCompare(b))\n            .map(([date, apts]) => (\n              <div key={date}>\n                <h2 className=\"text-lg font-[family-name:var(--font-cormorant)] text-[#f5f5f5] mb-3\">\n                  {formatDateDisplay(date)}\n                  <span className=\"text-sm text-[#888888] ml-2 font-[family-name:var(--font-montserrat)]\">\n                    ({apts.length} appointment{apts.length !== 1 ? \"s\" : \"\"})\n                  </span>\n                </h2>\n                <div className=\"bg-[#111111] border border-[#1a1a1a] divide-y divide-[#1a1a1a]\">\n                  {apts\n                    .sort((a, b) => a.timeSlot.localeCompare(b.timeSlot))\n                    .map((apt) => (\n                      <div\n                        key={apt.id}\n                        className=\"p-4 flex items-center justify-between hover:bg-[#1a1a1a]/50 transition-colors cursor-pointer\"\n                        onClick={() => setSelectedAppointment(apt)}\n                      >\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"text-center\">\n                            <p className=\"text-lg text-[#c9a962] font-[family-name:var(--font-montserrat)]\">\n                              {apt.timeSlot}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                              {apt.userName || \"Unknown\"}\n                            </p>\n                            <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                              {typeLabels[apt.type]} • {apt.userPhone}\n                            </p>\n                          </div>\n                        </div>\n                        <span\n                          className={`px-2 py-1 text-xs border ${statusColors[apt.status]} font-[family-name:var(--font-montserrat)]`}\n                        >\n                          {apt.status}\n                        </span>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            ))}\n        </div>\n      )}\n\n      {/* New Appointment Modal - Enhanced */}\n      {showNewForm && (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-[#111111] border border-[#1a1a1a] w-full max-w-lg max-h-[90vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between z-10\">\n              <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                Schedule Appointment\n              </h2>\n              <button\n                onClick={() => {\n                  setShowNewForm(false);\n                  setCustomerLookup(null);\n                  setNewAppointment({\n                    customerPhone: \"\",\n                    customerName: \"\",\n                    type: \"consultation\",\n                    date: \"\",\n                    timeSlot: \"\",\n                    notes: \"\",\n                  });\n                }}\n                className=\"text-[#888888] hover:text-[#f5f5f5]\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Customer Info */}\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Customer Phone *\n                  </label>\n                  <div className=\"relative\">\n                    <input\n                      type=\"tel\"\n                      value={newAppointment.customerPhone}\n                      onChange={(e) => handlePhoneLookup(e.target.value)}\n                      className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                      placeholder=\"08012345678\"\n                    />\n                    {lookingUp && (\n                      <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                        <div className=\"w-4 h-4 border-2 border-[#c9a962] border-t-transparent rounded-full animate-spin\" />\n                      </div>\n                    )}\n                  </div>\n                  {customerLookup && (\n                    <p className=\"text-xs text-green-400 mt-1 font-[family-name:var(--font-montserrat)]\">\n                      ✓ Existing customer: {customerLookup.name || customerLookup.phone}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Customer Name {!customerLookup && \"*\"}\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={newAppointment.customerName}\n                    onChange={(e) =>\n                      setNewAppointment({ ...newAppointment, customerName: e.target.value })\n                    }\n                    className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                    placeholder={customerLookup ? customerLookup.name || \"Enter name\" : \"Enter customer name\"}\n                  />\n                </div>\n              </div>\n\n              {/* Appointment Type - Visual Selection */}\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-3 font-[family-name:var(--font-montserrat)]\">\n                  Appointment Type\n                </label>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {(Object.keys(typeLabels) as AppointmentType[]).map((type) => (\n                    <button\n                      key={type}\n                      type=\"button\"\n                      onClick={() => setNewAppointment({ ...newAppointment, type })}\n                      className={`text-left p-3 border transition-colors ${\n                        newAppointment.type === type\n                          ? \"border-[#c9a962] bg-[#c9a962]/10\"\n                          : \"border-[#2a2a2a] hover:border-[#3a3a3a]\"\n                      }`}\n                    >\n                      <p\n                        className={`text-sm font-[family-name:var(--font-montserrat)] ${\n                          newAppointment.type === type ? \"text-[#c9a962]\" : \"text-[#f5f5f5]\"\n                        }`}\n                      >\n                        {typeLabels[type]}\n                      </p>\n                      <p className=\"text-[10px] text-[#888888] font-[family-name:var(--font-montserrat)] mt-1 line-clamp-2\">\n                        {typeDescriptions[type]}\n                      </p>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Date Selection */}\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  Date *\n                </label>\n                <input\n                  type=\"date\"\n                  value={newAppointment.date}\n                  onChange={(e) => {\n                    setNewAppointment({ ...newAppointment, date: e.target.value, timeSlot: \"\" });\n                  }}\n                  min={today}\n                  className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                />\n                {newAppointment.date && !isDateAvailable(newAppointment.date) && (\n                  <p className=\"text-red-400 text-xs mt-2 font-[family-name:var(--font-montserrat)]\">\n                    This date is not available. The studio is closed on this day.\n                  </p>\n                )}\n              </div>\n\n              {/* Time Selection - Visual Grid */}\n              {newAppointment.date && isDateAvailable(newAppointment.date) && (\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Time *\n                  </label>\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {generateTimeSlots().map((slot) => {\n                      const isBooked = getBookedSlots(newAppointment.date).includes(slot);\n                      const isBlocked = isTimeSlotBlocked(newAppointment.date, slot);\n                      const isUnavailable = isBooked || isBlocked;\n                      return (\n                        <button\n                          key={slot}\n                          type=\"button\"\n                          onClick={() => !isUnavailable && setNewAppointment({ ...newAppointment, timeSlot: slot })}\n                          disabled={isUnavailable}\n                          title={isBlocked ? getBlockedSlotReason(newAppointment.date, slot) : isBooked ? \"Booked\" : \"\"}\n                          className={`py-2 text-sm border font-[family-name:var(--font-montserrat)] transition-colors ${\n                            newAppointment.timeSlot === slot\n                              ? \"border-[#c9a962] text-[#c9a962] bg-[#c9a962]/10\"\n                              : isBlocked\n                              ? \"border-orange-500/30 text-orange-400/50 bg-orange-500/10 cursor-not-allowed\"\n                              : isBooked\n                              ? \"border-[#1a1a1a] text-[#444444] bg-[#1a1a1a]/50 cursor-not-allowed\"\n                              : \"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]\"\n                          }`}\n                        >\n                          {slot}\n                          {isBlocked && <span className=\"block text-[9px]\">Blocked</span>}\n                          {isBooked && !isBlocked && <span className=\"block text-[9px]\">Booked</span>}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n\n              {/* Notes */}\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  Notes (optional)\n                </label>\n                <textarea\n                  value={newAppointment.notes}\n                  onChange={(e) =>\n                    setNewAppointment({ ...newAppointment, notes: e.target.value })\n                  }\n                  rows={2}\n                  className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none resize-none\"\n                  placeholder=\"Any special notes for this appointment...\"\n                />\n              </div>\n\n              {/* Summary */}\n              {newAppointment.date && newAppointment.timeSlot && newAppointment.customerPhone && (\n                <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                  <p className=\"text-xs text-[#666666] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    Appointment Summary\n                  </p>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                      {typeLabels[newAppointment.type]}\n                    </p>\n                    <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      {formatDateDisplay(newAppointment.date)} at {newAppointment.timeSlot}\n                    </p>\n                    <p className=\"text-sm text-[#888888] font-[family-name:var(--font-montserrat)]\">\n                      {newAppointment.customerName || customerLookup?.name || \"Unknown\"} • {newAppointment.customerPhone}\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex gap-4 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowNewForm(false);\n                    setCustomerLookup(null);\n                    setNewAppointment({\n                      customerPhone: \"\",\n                      customerName: \"\",\n                      type: \"consultation\",\n                      date: \"\",\n                      timeSlot: \"\",\n                      notes: \"\",\n                    });\n                  }}\n                  className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleCreateAppointment}\n                  disabled={\n                    saving ||\n                    !newAppointment.customerPhone ||\n                    !newAppointment.date ||\n                    !newAppointment.timeSlot ||\n                    !isDateAvailable(newAppointment.date)\n                  }\n                  className=\"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50\"\n                >\n                  {saving ? \"Scheduling...\" : \"Schedule Appointment\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Appointment Detail Modal - Enhanced */}\n      {selectedAppointment && !showRescheduleModal && (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-[#111111] border border-[#1a1a1a] w-full max-w-md\">\n            <div className=\"border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between\">\n              <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                Appointment Details\n              </h2>\n              <button\n                onClick={() => setSelectedAppointment(null)}\n                className=\"text-[#888888] hover:text-[#f5f5f5]\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Status */}\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  Status\n                </label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {([\"pending\", \"confirmed\", \"completed\", \"cancelled\"] as AppointmentStatus[]).map((status) => (\n                    <button\n                      key={status}\n                      onClick={() => handleUpdateStatus(selectedAppointment.id, status)}\n                      className={`px-3 py-1 text-xs border font-[family-name:var(--font-montserrat)] transition-colors ${\n                        selectedAppointment.status === status\n                          ? statusColors[status]\n                          : \"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]\"\n                      }`}\n                    >\n                      {status.charAt(0).toUpperCase() + status.slice(1)}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Details */}\n              <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a] space-y-3\">\n                <div>\n                  <p className=\"text-xs text-[#666666] font-[family-name:var(--font-montserrat)]\">\n                    Customer\n                  </p>\n                  <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                    {selectedAppointment.userName || \"Unknown\"}\n                  </p>\n                  <a\n                    href={`tel:${selectedAppointment.userPhone}`}\n                    className=\"text-sm text-[#c9a962] font-[family-name:var(--font-montserrat)] hover:underline\"\n                  >\n                    {selectedAppointment.userPhone}\n                  </a>\n                </div>\n\n                <div>\n                  <p className=\"text-xs text-[#666666] font-[family-name:var(--font-montserrat)]\">\n                    Type\n                  </p>\n                  <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                    {typeLabels[selectedAppointment.type]}\n                  </p>\n                </div>\n\n                <div>\n                  <p className=\"text-xs text-[#666666] font-[family-name:var(--font-montserrat)]\">\n                    Date & Time\n                  </p>\n                  <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                    {formatDateDisplay(selectedAppointment.date)} at{\" \"}\n                    {selectedAppointment.timeSlot}\n                  </p>\n                </div>\n\n                {selectedAppointment.notes && (\n                  <div>\n                    <p className=\"text-xs text-[#666666] font-[family-name:var(--font-montserrat)]\">\n                      Notes\n                    </p>\n                    <p className=\"text-[#f5f5f5] text-sm font-[family-name:var(--font-montserrat)]\">\n                      {selectedAppointment.notes}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Quick Actions */}\n              <div className=\"flex gap-2\">\n                <a\n                  href={`https://wa.me/${selectedAppointment.userPhone.replace(/[^0-9]/g, \"\")}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex-1 flex items-center justify-center gap-2 border border-[#2a2a2a] text-[#888888] py-2 text-sm font-[family-name:var(--font-montserrat)] hover:border-[#c9a962] hover:text-[#c9a962] transition-colors\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z\" />\n                  </svg>\n                  WhatsApp\n                </a>\n                <button\n                  onClick={openRescheduleModal}\n                  className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 text-sm font-[family-name:var(--font-montserrat)] hover:border-[#c9a962] hover:text-[#c9a962] transition-colors\"\n                >\n                  Reschedule\n                </button>\n              </div>\n\n              {/* Delete */}\n              <button\n                onClick={() => handleDelete(selectedAppointment.id)}\n                className=\"w-full text-red-400 text-sm font-[family-name:var(--font-montserrat)] hover:text-red-300\"\n              >\n                Delete Appointment\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Reschedule Modal */}\n      {showRescheduleModal && selectedAppointment && (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-[#111111] border border-[#1a1a1a] w-full max-w-md max-h-[90vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-[#111111] border-b border-[#1a1a1a] px-6 py-4 flex items-center justify-between z-10\">\n              <h2 className=\"text-xl font-[family-name:var(--font-cormorant)] text-[#f5f5f5]\">\n                Reschedule Appointment\n              </h2>\n              <button\n                onClick={() => {\n                  setShowRescheduleModal(false);\n                  setRescheduleDate(\"\");\n                  setRescheduleTime(\"\");\n                }}\n                className=\"text-[#888888] hover:text-[#f5f5f5]\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              <div className=\"bg-[#0a0a0a] p-4 border border-[#1a1a1a]\">\n                <p className=\"text-xs text-[#666666] mb-1 font-[family-name:var(--font-montserrat)]\">\n                  Current Schedule\n                </p>\n                <p className=\"text-[#f5f5f5] font-[family-name:var(--font-montserrat)]\">\n                  {formatDateDisplay(selectedAppointment.date)} at {selectedAppointment.timeSlot}\n                </p>\n              </div>\n\n              {/* New Date */}\n              <div>\n                <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                  New Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={rescheduleDate}\n                  onChange={(e) => {\n                    setRescheduleDate(e.target.value);\n                    setRescheduleTime(\"\");\n                  }}\n                  min={today}\n                  className=\"w-full bg-[#0a0a0a] border border-[#2a2a2a] px-4 py-2 text-[#f5f5f5] font-[family-name:var(--font-montserrat)] focus:border-[#c9a962] focus:outline-none\"\n                />\n                {rescheduleDate && !isDateAvailable(rescheduleDate) && (\n                  <p className=\"text-red-400 text-xs mt-2 font-[family-name:var(--font-montserrat)]\">\n                    This date is not available.\n                  </p>\n                )}\n              </div>\n\n              {/* New Time */}\n              {rescheduleDate && isDateAvailable(rescheduleDate) && (\n                <div>\n                  <label className=\"block text-sm text-[#888888] mb-2 font-[family-name:var(--font-montserrat)]\">\n                    New Time\n                  </label>\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {generateTimeSlots().map((slot) => {\n                      const isBooked = getBookedSlots(rescheduleDate).includes(slot) &&\n                        !(rescheduleDate === selectedAppointment.date && slot === selectedAppointment.timeSlot);\n                      const isBlocked = isTimeSlotBlocked(rescheduleDate, slot);\n                      const isUnavailable = isBooked || isBlocked;\n                      return (\n                        <button\n                          key={slot}\n                          type=\"button\"\n                          onClick={() => !isUnavailable && setRescheduleTime(slot)}\n                          disabled={isUnavailable}\n                          title={isBlocked ? getBlockedSlotReason(rescheduleDate, slot) : \"\"}\n                          className={`py-2 text-sm border font-[family-name:var(--font-montserrat)] transition-colors ${\n                            rescheduleTime === slot\n                              ? \"border-[#c9a962] text-[#c9a962] bg-[#c9a962]/10\"\n                              : isBlocked\n                              ? \"border-orange-500/30 text-orange-400/50 bg-orange-500/10 cursor-not-allowed\"\n                              : isBooked\n                              ? \"border-[#1a1a1a] text-[#444444] bg-[#1a1a1a]/50 cursor-not-allowed\"\n                              : \"border-[#2a2a2a] text-[#888888] hover:border-[#3a3a3a]\"\n                          }`}\n                        >\n                          {slot}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex gap-4 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowRescheduleModal(false);\n                    setRescheduleDate(\"\");\n                    setRescheduleTime(\"\");\n                  }}\n                  className=\"flex-1 border border-[#2a2a2a] text-[#888888] py-2 font-[family-name:var(--font-montserrat)] hover:border-[#3a3a3a] hover:text-[#f5f5f5] transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleReschedule}\n                  disabled={!rescheduleDate || !rescheduleTime || !isDateAvailable(rescheduleDate)}\n                  className=\"flex-1 bg-[#c9a962] text-[#0a0a0a] py-2 font-[family-name:var(--font-montserrat)] hover:bg-[#d4b87a] transition-colors disabled:opacity-50\"\n                >\n                  Confirm Reschedule\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}